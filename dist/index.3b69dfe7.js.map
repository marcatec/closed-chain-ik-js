{"mappings":"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","sources":["example/loadModels.js","node_modules/xacro-parser/src/XacroLoader.js","node_modules/xacro-parser/src/utils.js","node_modules/xacro-parser/src/XacroParser.js","node_modules/xacro-parser/src/evaluateExpression.js","node_modules/expr-eval/dist/index.mjs"],"sourcesContent":["import URDFLoader from 'urdf-loader';\nimport {\n\tJoint,\n\turdfRobotToIKRoot,\n\tsetIKFromUrdf,\n} from '../src/index.js';\nimport { DEG2RAD } from '../src/core/utils/constants.js';\nimport { LoadingManager, sRGBEncoding } from 'three';\nimport { XacroLoader } from 'xacro-parser';\nimport { quat } from 'gl-matrix';\n\n// convert colors and texture to correct color space. Three.js Collada Loader does not\n// set these correctly.\nfunction convertColorsAndTextures( root ) {\n\n\tfunction _apply( material ) {\n\n\t\tmaterial.color.convertSRGBToLinear();\n\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\n\t}\n\n\troot.traverse( c => {\n\n\t\tif ( c.material ) {\n\n\t\t\tconst material = c.material;\n\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\tmaterial.forEach( _apply );\n\n\t\t\t} else {\n\n\t\t\t\t_apply( material );\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n}\n\nexport function loadCuriosity() {\n\n\treturn new Promise( ( resolve, reject ) => {\n\n\t\tconst url = 'https://raw.githubusercontent.com/gkjohnson/curiosity_mars_rover-mirror/master/curiosity_mars_rover_description/urdf/curiosity_mars_rover.xacro';\n\t\tconst xacroLoader = new XacroLoader();\n\t\txacroLoader.rospackCommands = {\n\n\t\t\tfind( pkg ) {\n\n\t\t\t\tswitch ( pkg ) {\n\n\t\t\t\t\tcase 'curiosity_mars_rover_description':\n\t\t\t\t\t\treturn 'https://raw.githubusercontent.com/gkjohnson/curiosity_mars_rover-mirror/master/curiosity_mars_rover_description/';\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn pkg;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\txacroLoader.load( url, xacro => {\n\n\t\t\tlet ik, urdf, goalMap;\n\n\t\t\tconst manager = new LoadingManager();\n\t\t\tmanager.onLoad = () => {\n\n\t\t\t\tconst toRemove = [];\n\t\t\t\turdf.traverse( c => {\n\n\t\t\t\t\tif ( c.isLight || c.isLineSegments ) {\n\n\t\t\t\t\t\ttoRemove.push( c );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\ttoRemove.forEach( l => {\n\n\t\t\t\t\tl.parent.remove( l );\n\n\t\t\t\t} );\n\n\t\t\t\tconvertColorsAndTextures( urdf );\n\n\t\t\t\tresolve( { ik, urdf, goalMap, helperScale: 0.3 } );\n\n\t\t\t};\n\n\t\t\tconst urdfLoader = new URDFLoader( manager );\n\t\t\turdfLoader.packages = {\n\t\t\t\t'curiosity_mars_rover_description': 'https://raw.githubusercontent.com/gkjohnson/curiosity_mars_rover-mirror/master/curiosity_mars_rover_description/'\n\t\t\t};\n\t\t\turdf = urdfLoader.parse( xacro );\n\t\t\turdf.joints.arm_03_joint.limit.upper = Math.PI * 3 / 2;\n\t\t\tik = urdfRobotToIKRoot( urdf );\n\n\t\t\t// make the root fixed\n\t\t\tik.clearDoF();\n\t\t\tquat.fromEuler( ik.quaternion, - 90, 0, 0 );\n\t\t\tik.position[ 1 ] -= 0.5;\n\t\t\tik.setMatrixNeedsUpdate();\n\n\t\t\t// start the joints off at reasonable angles\n\t\t\turdf.setJointValue( 'arm_02_joint', - Math.PI / 2 );\n\t\t\turdf.setJointValue( 'arm_03_joint', Math.PI );\n\t\t\turdf.setJointValue( 'arm_04_joint', Math.PI );\n\t\t\t// urdf.setJointValue( 'joint_5', - Math.PI / 4 );\n\t\t\tsetIKFromUrdf( ik, urdf );\n\n\t\t\tgoalMap = new Map();\n\t\t\tconst tool = ik.find( l => l.name === 'arm_tools' );\n\t\t\tconst link = urdf.links.arm_tools;\n\n\t\t\tconst ee = new Joint();\n\t\t\tee.name = link.name;\n\t\t\tee.makeClosure( tool );\n\n\t\t\ttool.getWorldPosition( ee.position );\n\t\t\ttool.getWorldQuaternion( ee.quaternion );\n\t\t\tee.setMatrixNeedsUpdate();\n\t\t\tgoalMap.set( ee, tool );\n\n\t\t}, reject );\n\n\t} );\n\n}\n\nexport function loadStaubli() {\n\n\treturn new Promise( ( resolve, reject ) => {\n\n\t\tconst url = 'https://raw.githubusercontent.com/ros-industrial/staubli_experimental/ce422fe0a54232d73cf44e2571fc7abc2f5ff9f6/staubli_tx2_90_support/urdf/tx2_90.xacro';\n\t\tconst xacroLoader = new XacroLoader();\n\t\txacroLoader.rospackCommands = {\n\n\t\t\tfind( pkg ) {\n\n\t\t\t\tswitch ( pkg ) {\n\n\t\t\t\t\tcase 'staubli_resources':\n\t\t\t\t\t\treturn 'https://raw.githubusercontent.com/ros-industrial/staubli/indigo-devel/staubli_resources/';\n\t\t\t\t\tcase 'staubli_tx2_90_support':\n\t\t\t\t\t\treturn 'https://raw.githubusercontent.com/ros-industrial/staubli_experimental/ce422fe0a54232d73cf44e2571fc7abc2f5ff9f6/staubli_tx2_90_support/';\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn pkg;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\txacroLoader.load( url, xacro => {\n\n\t\t\tlet ik, urdf, goalMap;\n\n\t\t\tconst manager = new LoadingManager();\n\t\t\tmanager.onLoad = () => {\n\n\t\t\t\tresolve( { ik, urdf, goalMap, helperScale: 0.3 } );\n\n\t\t\t};\n\n\t\t\tconst urdfLoader = new URDFLoader( manager );\n\t\t\turdfLoader.packages = {\n\t\t\t\t'staubli_tx2_90_support': 'https://raw.githubusercontent.com/ros-industrial/staubli_experimental/ce422fe0a54232d73cf44e2571fc7abc2f5ff9f6/staubli_tx2_90_support/'\n\t\t\t};\n\t\t\turdf = urdfLoader.parse( xacro );\n\t\t\tik = urdfRobotToIKRoot( urdf );\n\n\t\t\t// make the root fixed\n\t\t\tik.clearDoF();\n\t\t\tquat.fromEuler( ik.quaternion, - 90, 0, 0 );\n\t\t\tik.position[ 1 ] -= 0.5;\n\t\t\tik.setMatrixNeedsUpdate();\n\n\t\t\t// start the joints off at reasonable angles\n\t\t\turdf.setJointValue( 'joint_2', Math.PI / 4 );\n\t\t\turdf.setJointValue( 'joint_3', Math.PI / 2 );\n\t\t\turdf.setJointValue( 'joint_5', - Math.PI / 4 );\n\t\t\tsetIKFromUrdf( ik, urdf );\n\n\t\t\tgoalMap = new Map();\n\t\t\tconst tool = ik.find( l => l.name === 'tool0' );\n\t\t\tconst link = urdf.links.tool0;\n\n\t\t\tconst ee = new Joint();\n\t\t\tee.name = link.name;\n\t\t\tee.makeClosure( tool );\n\n\t\t\ttool.getWorldPosition( ee.position );\n\t\t\ttool.getWorldQuaternion( ee.quaternion );\n\t\t\tee.setMatrixNeedsUpdate();\n\t\t\tgoalMap.set( ee, tool );\n\n\t\t}, reject );\n\n\t} );\n\n}\n\nexport function loadATHLETE() {\n\n\treturn new Promise( ( resolve, reject ) => {\n\n\t\tlet ik, urdf, goalMap;\n\t\tconst manager = new LoadingManager();\n\t\tmanager.onLoad = () => {\n\n\t\t\tresolve( { ik, urdf, goalMap } );\n\n\t\t};\n\n\t\tconst url = 'https://raw.githubusercontent.com/gkjohnson/urdf-loaders/master/urdf/T12/urdf/T12_flipped.URDF';\n\n\t\tconst loader = new URDFLoader( manager );\n\t\tloader.load( url, result => {\n\n\t\t\turdf = result;\n\t\t\tik = urdfRobotToIKRoot( urdf );\n\n\t\t\t// update the robot joints\n\t\t\tconst DEG2RAD = Math.PI / 180;\n\t\t\turdf.rotation.set( Math.PI / 2, 0, 0 );\n\t\t\tfor ( let i = 1; i <= 6; i ++ ) {\n\n\t\t\t\turdf.joints[ `HP${ i }` ].setJointValue( 30 * DEG2RAD );\n\t\t\t\turdf.joints[ `KP${ i }` ].setJointValue( 90 * DEG2RAD );\n\t\t\t\turdf.joints[ `AP${ i }` ].setJointValue( - 30 * DEG2RAD );\n\n\t\t\t}\n\n\t\t\t// update the degrees of freedom of the joints\n\t\t\tsetIKFromUrdf( ik, urdf );\n\n\t\t\t// store the rest pose\n\t\t\tgoalMap = new Map();\n\t\t\tik.traverse( c => {\n\n\t\t\t\tconsole.log(c.name);\n\t\t\t\tif ( c.isJoint ) {\n\n\t\t\t\t\tc.dofRestPose.set( c.dofValues );\n\t\t\t\t\tc.restPoseSet = true;\n\n\t\t\t\t} else if ( /^Foot/.test( c.name ) ) {\n\n\t\t\t\t\tconst link = urdf.links[ c.name ];\n\t\t\t\t\tconst ee = new Joint();\n\t\t\t\t\tee.name = link.name;\n\t\t\t\t\tee.makeClosure( c );\n\n\t\t\t\t\tc.getWorldPosition( ee.position );\n\t\t\t\t\tc.getWorldQuaternion( ee.quaternion );\n\t\t\t\t\tee.setMatrixNeedsUpdate();\n\n\t\t\t\t\tgoalMap.set( ee, c );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}, null, reject );\n\n\t} );\n\n}\n\nexport function loadRobonaut() {\n\n\treturn new Promise( ( resolve, reject ) => {\n\n\t\tlet urdf, ik, goalMap;\n\t\tconst manager = new LoadingManager();\n\t\tmanager.onLoad = () => {\n\n\t\t\tconvertColorsAndTextures( urdf );\n\n\t\t\tresolve( { ik, urdf, goalMap, helperScale: 0.2 } );\n\n\t\t};\n\n\t\tconst url = 'https://raw.githubusercontent.com/gkjohnson/nasa-urdf-robots/master/r2_description/robots/r2b.urdf';\n\t\tconst loader = new URDFLoader( manager );\n\t\tloader.packages = {\n\t\t\tr2_description: 'https://raw.githubusercontent.com/gkjohnson/nasa-urdf-robots/master/r2_description',\n\t\t};\n\t\tloader.load( url, result => {\n\n\t\t\turdf = result;\n\t\t\turdf.rotation.set( - Math.PI / 2, 0, 0 );\n\n\t\t\tik = urdfRobotToIKRoot( urdf );\n\n\t\t\turdf.joints[ 'r2/left_leg/joint3' ].setJointValue( 60 * DEG2RAD );\n\t\t\turdf.joints[ 'r2/left_leg/joint5' ].setJointValue( 60 * DEG2RAD );\n\t\t\turdf.joints[ 'r2/left_arm/joint1' ].setJointValue( - 80 * DEG2RAD );\n\t\t\turdf.joints[ 'r2/left_arm/joint2' ].setJointValue( - 100 * DEG2RAD );\n\t\t\turdf.joints[ 'r2/left_arm/joint3' ].setJointValue( - 90 * DEG2RAD );\n\t\t\turdf.joints[ 'r2/left_arm/joint4' ].setJointValue( 90 * DEG2RAD );\n\n\t\t\turdf.joints[ 'r2/right_leg/joint3' ].setJointValue( 60 * DEG2RAD );\n\t\t\turdf.joints[ 'r2/right_leg/joint5' ].setJointValue( 60 * DEG2RAD );\n\t\t\turdf.joints[ 'r2/right_arm/joint1' ].setJointValue( - 80 * DEG2RAD );\n\t\t\turdf.joints[ 'r2/right_arm/joint2' ].setJointValue( 100 * DEG2RAD );\n\t\t\turdf.joints[ 'r2/right_arm/joint3' ].setJointValue( - 90 * DEG2RAD );\n\t\t\turdf.joints[ 'r2/right_arm/joint4' ].setJointValue( - 90 * DEG2RAD );\n\n\t\t\tsetIKFromUrdf( ik, urdf );\n\n\t\t\tgoalMap = new Map();\n\t\t\tik.traverse( c => {\n\n\t\t\t\tif ( c.isJoint ) {\n\n\t\t\t\t\tc.dofRestPose.set( c.dofValues );\n\t\t\t\t\tc.restPoseSet = true;\n\n\t\t\t\t} else if (\n\t\t\t\t\tc.name === 'r2/left_leg_foot' ||\n\t\t\t\t\tc.name === 'r2/right_leg_foot'\n\t\t\t\t) {\n\n\t\t\t\t\tconst link = urdf.links[ c.name ];\n\t\t\t\t\tconst ee = new Joint();\n\t\t\t\t\tee.name = link.name;\n\t\t\t\t\tee.makeClosure( c );\n\n\t\t\t\t\tc.getWorldPosition( ee.position );\n\t\t\t\t\tc.getWorldQuaternion( ee.quaternion );\n\t\t\t\t\tee.setMatrixNeedsUpdate();\n\n\t\t\t\t\tgoalMap.set( ee, c );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\n\t\t}, null, reject );\n\n\t} );\n\n}\n\nexport function loadAthnaut() {\n\n\treturn new Promise( ( resolve, reject ) => {\n\n\t\tlet athlete, r2, url, loader;\n\n\t\tconst manager = new LoadingManager();\n\t\turl = 'https://raw.githubusercontent.com/gkjohnson/urdf-loaders/master/urdf/T12/urdf/T12_flipped.URDF';\n\t\tloader = new URDFLoader( manager );\n\t\tloader.load( url, robot => athlete = robot, null, reject );\n\n\t\turl = 'https://raw.githubusercontent.com/gkjohnson/nasa-urdf-robots/master/r2_description/robots/r2c5.urdf';\n\t\tloader = new URDFLoader( manager );\n\t\tloader.packages = {\n\t\t\tr2_description: 'https://raw.githubusercontent.com/gkjohnson/nasa-urdf-robots/master/r2_description',\n\t\t};\n\t\tloader.load( url, robot => r2 = robot, null, reject );\n\n\t\tmanager.onLoad = () => {\n\n\t\t\tconst r22 = r2.clone();\n\n\t\t\t// set up first r2\n\t\t\tathlete.links[ 'Foot1' ].traverse( c => c.visible = ! c.isMesh );\n\n\t\t\tconst r2Base = r2.joints[ 'r2/fixed/stanchion/robot_base' ];\n\t\t\tathlete.links[ 'Foot1' ].add( r2Base );\n\t\t\tr2Base.position.z = 0.15;\n\t\t\tr2Base.rotation.z = Math.PI;\n\n\t\t\tObject.assign( athlete.joints, r2.joints );\n\t\t\tObject.assign( athlete.links, r2.links );\n\n\t\t\t// set up second r2\n\t\t\tObject.keys( r22.links ).forEach( l => {\n\n\t\t\t\tr22.links[ l + '_2' ] = r22.links[ l ];\n\t\t\t\tr22.links[ l ].name = l + '_2';\n\n\t\t\t\tdelete r22.links[ l ];\n\n\t\t\t} );\n\t\t\tObject.keys( r22.joints ).forEach( l => {\n\n\t\t\t\tr22.joints[ l + '_2' ] = r22.joints[ l ];\n\t\t\t\tr22.joints[ l ].name = l + '_2';\n\n\t\t\t\tdelete r22.joints[ l ];\n\n\t\t\t} );\n\n\t\t\tathlete.links[ 'Foot6' ].traverse( c => c.visible = ! c.isMesh );\n\n\t\t\tconst r22Base = r22.joints[ 'r2/fixed/stanchion/robot_base_2' ];\n\t\t\tathlete.links[ 'Foot6' ].add( r22Base );\n\t\t\tr22Base.position.z = 0.15;\n\t\t\tr22Base.rotation.z = Math.PI;\n\n\t\t\tObject.assign( athlete.joints, r22.joints );\n\t\t\tObject.assign( athlete.links, r22.links );\n\n\n\t\t\tconst ik = urdfRobotToIKRoot( athlete );\n\n\t\t\t// update the robot joints\n\t\t\tconst DEG2RAD = Math.PI / 180;\n\t\t\tathlete.rotation.set( Math.PI / 2, 0, 0 );\n\t\t\tfor ( let i = 1; i <= 6; i ++ ) {\n\n\t\t\t\tathlete.joints[ `HP${ i }` ].setJointValue( 30 * DEG2RAD );\n\t\t\t\tathlete.joints[ `KP${ i }` ].setJointValue( 90 * DEG2RAD );\n\t\t\t\tathlete.joints[ `AP${ i }` ].setJointValue( - 30 * DEG2RAD );\n\n\t\t\t}\n\n\t\t\tathlete.joints[ `HP1` ].setJointValue( - 30 * DEG2RAD );\n\t\t\tathlete.joints[ `KP1` ].setJointValue( - 60 * DEG2RAD );\n\t\t\tathlete.joints[ `AP1` ].setJointValue( 0 );\n\n\t\t\tathlete.joints[ `HP6` ].setJointValue( - 30 * DEG2RAD );\n\t\t\tathlete.joints[ `KP6` ].setJointValue( - 60 * DEG2RAD );\n\t\t\tathlete.joints[ `AP6` ].setJointValue( 0 );\n\n\t\t\tathlete.joints[ `HY2` ].setJointValue( 60 * DEG2RAD );\n\t\t\tathlete.joints[ `HY5` ].setJointValue( - 60 * DEG2RAD );\n\n\t\t\tathlete.joints[ 'r2/left_arm/joint1' ].setJointValue( - 80 * DEG2RAD );\n\t\t\tathlete.joints[ 'r2/left_arm/joint2' ].setJointValue( - 100 * DEG2RAD );\n\t\t\tathlete.joints[ 'r2/left_arm/joint3' ].setJointValue( - 90 * DEG2RAD );\n\t\t\tathlete.joints[ 'r2/left_arm/joint4' ].setJointValue( 90 * DEG2RAD );\n\n\t\t\tathlete.joints[ 'r2/right_arm/joint1' ].setJointValue( - 80 * DEG2RAD );\n\t\t\tathlete.joints[ 'r2/right_arm/joint2' ].setJointValue( 100 * DEG2RAD );\n\t\t\tathlete.joints[ 'r2/right_arm/joint3' ].setJointValue( - 90 * DEG2RAD );\n\t\t\tathlete.joints[ 'r2/right_arm/joint4' ].setJointValue( - 90 * DEG2RAD );\n\n\t\t\tathlete.joints[ 'r2/left_arm/joint1_2' ].setJointValue( - 80 * DEG2RAD );\n\t\t\tathlete.joints[ 'r2/left_arm/joint2_2' ].setJointValue( - 100 * DEG2RAD );\n\t\t\tathlete.joints[ 'r2/left_arm/joint3_2' ].setJointValue( - 90 * DEG2RAD );\n\t\t\tathlete.joints[ 'r2/left_arm/joint4_2' ].setJointValue( 90 * DEG2RAD );\n\n\t\t\tathlete.joints[ 'r2/right_arm/joint1_2' ].setJointValue( - 80 * DEG2RAD );\n\t\t\tathlete.joints[ 'r2/right_arm/joint2_2' ].setJointValue( 100 * DEG2RAD );\n\t\t\tathlete.joints[ 'r2/right_arm/joint3_2' ].setJointValue( - 90 * DEG2RAD );\n\t\t\tathlete.joints[ 'r2/right_arm/joint4_2' ].setJointValue( - 90 * DEG2RAD );\n\n\t\t\tsetIKFromUrdf( ik, athlete );\n\n\t\t\tconst goalMap = new Map();\n\t\t\tik.traverse( c => {\n\n\t\t\t\tif ( c.isJoint ) {\n\n\t\t\t\t\tc.dofRestPose.set( c.dofValues );\n\t\t\t\t\tc.restPoseSet = true;\n\n\t\t\t\t} else if ( /^Foot/.test( c.name ) ) {\n\n\t\t\t\t\tconst link = athlete.links[ c.name ];\n\t\t\t\t\tconst ee = new Joint();\n\t\t\t\t\tee.name = link.name;\n\t\t\t\t\tee.makeClosure( c );\n\n\t\t\t\t\tc.getWorldPosition( ee.position );\n\t\t\t\t\tc.getWorldQuaternion( ee.quaternion );\n\t\t\t\t\tee.setMatrixNeedsUpdate();\n\n\t\t\t\t\tgoalMap.set( ee, c );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tresolve( { ik, urdf: athlete, goalMap, helperScale: 0.2 } );\n\n\t\t};\n\n\t} );\n\n}\n","import { getUrlBase } from './utils.js';\r\nimport { XacroParser } from './XacroParser.js';\r\n\r\nexport class XacroLoader extends XacroParser {\r\n\r\n    constructor() {\r\n\r\n        super();\r\n        this.fetchOptions = {};\r\n\r\n    }\r\n\r\n    load(url, onComplete, onError) {\r\n\r\n        const workingPath = getUrlBase(url);\r\n        if (this.workingPath === '') {\r\n\r\n            this.workingPath = workingPath;\r\n\r\n        }\r\n\r\n        this\r\n            .getFileContents(url)\r\n            .then(text => {\r\n\r\n                this.parse(text, onComplete, onError);\r\n\r\n            })\r\n            .catch(e => {\r\n\r\n                if (onError) {\r\n\r\n                    onError(e);\r\n\r\n                }\r\n\r\n            });\r\n\r\n    }\r\n\r\n    parse(data, onComplete, onError) {\r\n\r\n        super\r\n            .parse(data)\r\n            .then(onComplete)\r\n            .catch(e => {\r\n\r\n                if (onError) {\r\n\r\n                    onError(e);\r\n\r\n                }\r\n\r\n            });\r\n\r\n    }\r\n\r\n    getFileContents(path) {\r\n\r\n        return fetch(path, this.fetchOptions)\r\n            .then(res => {\r\n\r\n                if (res.ok) {\r\n\r\n                    return res.text();\r\n\r\n                } else {\r\n\r\n                    throw new Error(`XacroLoader: Failed to load url '${ path }' with error code ${ res.status } : ${ res.statusText }.`);\r\n\r\n                }\r\n\r\n            });\r\n\r\n    }\r\n\r\n}\r\n","\r\nexport function getUrlBase(url) {\r\n    const tokens = url.split(/[\\\\/]/g);\r\n    tokens.pop();\r\n    if (tokens.length === 0) {\r\n        return './';\r\n    } else {\r\n        return tokens.join('/') + '/';\r\n    }\r\n}\r\n\r\n// XML Helpers\r\n// QuerySelectorAll that respects tag prefixes like 'xacro:'\r\nexport function getElementsWithName(node, name, res = []) {\r\n    if (node.tagName === name) {\r\n        res.push(node);\r\n    }\r\n    for (let i = 0, l = node.children.length; i < l; i++) {\r\n        const child = node.children[i];\r\n        getElementsWithName(child, name, res);\r\n    }\r\n    return res;\r\n}\r\n\r\n// Deep clone an xml node without the macro or property tags.\r\nexport function deepClone(node, stripPropsMacros) {\r\n    const cloned = node.cloneNode();\r\n    const childNodes = node.childNodes;\r\n    for (let i = 0, l = childNodes.length; i < l; i++) {\r\n        const child = childNodes[i];\r\n        const tagName = child.tagName;\r\n        if (!stripPropsMacros || (tagName !== 'xacro:property' && tagName !== 'xacro:macro')) {\r\n            cloned.appendChild(deepClone(child, stripPropsMacros));\r\n        }\r\n    }\r\n    return cloned;\r\n}\r\n\r\n// Takes an array of xml elements and removes the last elements that\r\n// are comments or newlines.\r\nexport function removeEndCommentsFromArray(arr) {\r\n    while (arr.length > 0) {\r\n        const el = arr[arr.length - 1];\r\n        if (el.nodeType !== el.ELEMENT_NODE) {\r\n            arr.pop();\r\n        } else {\r\n            break;\r\n        }\r\n    }\r\n}\r\n\r\n// Expression helpers\r\nexport function isOperator(str) {\r\n    const regexp = /^[()/*+\\-%|&=[\\]]+$/;\r\n    return regexp.test(str);\r\n}\r\n\r\nexport function isString(str) {\r\n    const regexp = /^(('[^']*?')|(\"[^\"]*?\")|(`[^`]*?`))$/;\r\n    return regexp.test(str);\r\n}\r\n\r\n// TODO: make this more robust\r\nexport function isNumber(str) {\r\n    return !isNaN(parseFloat(str)) && !/[^0-9.eE-]/.test(str);\r\n}\r\n\r\n// TODO: this needs to tokenize numbers together\r\nexport function tokenize(str) {\r\n    const regexp = /(('[^']*?')|(\"[^\"]*?\")|(`[^`]*?`)|([()/*+\\-%|&=[\\]]+))/g;\r\n    return str\r\n        .replace(regexp, m => ` ${ m } `)\r\n        .trim()\r\n        .split(/\\s+/g);\r\n}\r\n\r\nexport function normalizeExpression(str) {\r\n    // Remove any instances of \"--\" or \"++\" that might occur from negating a negative number\r\n    // by adding a space that are not in a string.\r\n    return str.replace(/[-+]{2,}/, val => {\r\n        let positive = true;\r\n        for (let i = 0, l = val.length; i < l; i++) {\r\n            const operator = val[i];\r\n            if (operator === '-') {\r\n                positive = !positive;\r\n            }\r\n        }\r\n\r\n        return positive ? '+' : '-';\r\n    });\r\n}\r\n\r\n// Property Set Helpers\r\nexport const PARENT_SCOPE = Symbol('parent');\r\n\r\n// merges a set of properties together into a single set retaining\r\n// the parent scope link as well.\r\nexport function mergePropertySets(...args) {\r\n    const res = {};\r\n    for (let i = 0, l = args.length; i < l; i++) {\r\n        const obj = args[i];\r\n        for (const key in obj) {\r\n            res[key] = obj[key];\r\n        }\r\n        if (PARENT_SCOPE in obj) {\r\n            res[PARENT_SCOPE] = obj[PARENT_SCOPE];\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\n// Copies a property set and creates a link to the original set as a parent scope\r\nexport function createNewPropertyScope(properties) {\r\n    const res = mergePropertySets(properties);\r\n    res[PARENT_SCOPE] = properties;\r\n    return res;\r\n}\r\n","import {\r\n    getUrlBase,\r\n    removeEndCommentsFromArray,\r\n    getElementsWithName,\r\n    deepClone,\r\n    isOperator,\r\n    isString,\r\n    isNumber,\r\n    normalizeExpression,\r\n    tokenize,\r\n    mergePropertySets,\r\n    createNewPropertyScope,\r\n    PARENT_SCOPE,\r\n} from './utils.js';\r\nimport { evaluateExpression } from './evaluateExpression.js';\r\n\r\nexport class XacroParser {\r\n\r\n    constructor() {\r\n        this.inOrder = true;\r\n        this.requirePrefix = true;\r\n        this.localProperties = true;\r\n        this.rospackCommands = {};\r\n        this.workingPath = '';\r\n    }\r\n\r\n    async getFileContents(path) {\r\n        throw new Error('XacroParser: getFileContents() not implemented.');\r\n    }\r\n\r\n    async parse(data) {\r\n\r\n        /* Evaluation */\r\n        // Evaluate expressions and rospack commands in attribute text\r\n        // TODO: expressions can basically be any python expression\r\n        function evaluateAttribute(str, properties, finalValue = false) {\r\n\r\n            // recursively unpack parameters\r\n            function unpackParams(str, properties) {\r\n\r\n                // if we're unpacking something that's already a number then just return\r\n                if (typeof str === 'number') {\r\n                    return str;\r\n                }\r\n\r\n                // process all of the ${} and $() expressions\r\n                const res = str.replace(/(\\$?\\$\\([^)]+\\))|(\\$?\\${[^}]+})/g, match => {\r\n\r\n                    // if we encounter an escaped $$ then return early\r\n                    if (/^\\$\\$/.test(match)) {\r\n                        return match;\r\n                    }\r\n\r\n                    const isRospackCommand = /^\\$\\(/.test(match);\r\n                    let contents = match.substring(2, match.length - 1);\r\n                    contents = unpackParams(contents, properties);\r\n\r\n                    if (isRospackCommand) {\r\n\r\n                        const command = unpackParams(contents, properties);\r\n                        const tokens = command.split(/\\s+/g);\r\n                        const stem = tokens.shift();\r\n\r\n                        try {\r\n                            return handleRospackCommand(stem, ...tokens);\r\n                        } catch (e) {\r\n                            throw new Error(`XacroParser: Cannot run rospack command \"${ contents }\".\\n` + e.message);\r\n                        }\r\n\r\n                    } else {\r\n                        if (stack.includes(contents)) {\r\n                            throw new Error(\r\n                                `XacroParser: Cannot evaluate infinitely recursive expression: ${\r\n                                    stack.join(' > ')\r\n                                } > ${\r\n                                    contents\r\n                                }`\r\n                            );\r\n                        }\r\n\r\n                        stack.push(contents);\r\n\r\n                        const operators = /(()|()|()|[()/*+\\-%|&=[\\]])+/g;\r\n                        const expr = tokenize(contents)\r\n                            .map(t => {\r\n                                operators.lastIndex = 0;\r\n                                if (isOperator(t)) return t;\r\n                                if (isNumber(t)) return t;\r\n                                if (isString(t)) return t;\r\n\r\n                                if (t in properties) {\r\n                                    const arg = unpackParams(properties[t], properties);\r\n                                    if (!isNumber(arg)) {\r\n                                        return `\"${ arg.toString().replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"') }\"`;\r\n                                    } else {\r\n                                        return arg;\r\n                                    }\r\n                                } else {\r\n                                    return t;\r\n                                }\r\n                            })\r\n                            .join('');\r\n\r\n                        stack.pop();\r\n\r\n                        if (isString(expr)) {\r\n                            return expr.substring(1, expr.length - 1);\r\n                        } else if (isNumber(expr)) {\r\n                            return expr;\r\n                        } else {\r\n                            const cleanExpr = normalizeExpression(expr);\r\n                            return handleExpressionEvaluation(cleanExpr);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                return res;\r\n\r\n            }\r\n\r\n            const stack = [];\r\n            const allProps = mergePropertySets(globalProperties, properties);\r\n            try {\r\n                // fix the escaped dollar signs only at the end to prevent double evaluation and only\r\n                // if the value is not an intermediate value like a computed property.\r\n                let result = unpackParams(str, allProps);\r\n                if (finalValue) {\r\n                    result = result.replace(/\\${2}([({])/g, (val, brace) => `$${ brace }`);\r\n                }\r\n                return result;\r\n            } catch (e) {\r\n                throw new Error(`XacroParser: Failed to process expression \"${ str }\". \\n` + e.message);\r\n            }\r\n\r\n        }\r\n\r\n        // Evaluate the given node as a macro\r\n        async function evaluateMacro(node, properties, macros, resultsList) {\r\n\r\n            // Find the macro\r\n            const macroName = node.tagName.replace(/^xacro:/, '');\r\n            const macro = macros[macroName];\r\n\r\n            if (!macro) {\r\n                throw new Error(`XacroParser: Cannot find macro \"${ macroName }\"`);\r\n            }\r\n\r\n            // Copy the properties and macros so we can modify them with\r\n            // macro input fields and local macro definitions.\r\n            const ogProperties = properties;\r\n            const ogMacros = macros;\r\n            properties = createNewPropertyScope(properties);\r\n            macros = mergePropertySets(macros);\r\n\r\n            // Modify the properties with macro param inputs\r\n            let children = [];\r\n            for (const c of node.children) {\r\n                await processNode(c, ogProperties, ogMacros, children);\r\n            }\r\n            children = children.filter(c => c.nodeType === c.ELEMENT_NODE);\r\n\r\n            let blockCount = 0;\r\n            for (const p in macro.params) {\r\n                const param = macro.params[p];\r\n                if (node.hasAttribute(p)) {\r\n                    properties[p] = evaluateAttribute(node.getAttribute(p), ogProperties);\r\n                } else if (param.type === 'BLOCK') {\r\n                    properties[p] = [children[blockCount]];\r\n                    blockCount++;\r\n                } else if (param.type === 'MULTI_BLOCK') {\r\n                    properties[p] = [...children.filter(c => c.tagName === p)[0].childNodes];\r\n                } else {\r\n                    properties[p] = evaluateAttribute(macro.params[p].def, ogProperties);\r\n                }\r\n            }\r\n\r\n            // Expand the macro\r\n            const macroChildren = [...macro.node.childNodes];\r\n            for (const c of macroChildren) {\r\n                const nodes = [];\r\n                await processNode(c, properties, macros, nodes);\r\n                resultsList.push(...nodes);\r\n            }\r\n        }\r\n\r\n        /* Parsing */\r\n        // Conver the params into an object representation\r\n        function parseMacroParam(param) {\r\n            const obj = {};\r\n\r\n            // Save the type of parameter\r\n            // - two asterisks means an element expands input multiple\r\n            // - one asterisk means copy the first elemnt\r\n            // - no asterisks means value param\r\n            if (/^\\*\\*/.test(param)) {\r\n                obj.type = 'MULTI_BLOCK';\r\n            } else if (/^\\*/.test(param)) {\r\n                obj.type = 'BLOCK';\r\n            } else {\r\n                obj.type = 'PARAM';\r\n            }\r\n\r\n            // strip the asterisks\r\n            param = param.replace(/^\\*{1,2}/g, '');\r\n\r\n            // Check if a default value is provided\r\n            if (/:=/.test(param)) {\r\n                const [name, def] = param.split(':=');\r\n\r\n                // TODO: Support caret and default syntax\r\n                // TODO: is there any difference between the := and = syntax?\r\n                if (/^\\^/.test(def) || /\\|/.test(def)) {\r\n                    throw new Error(`XacroParser: ROS Jade pass-through notation not supported in macro defaults: ${ def }`);\r\n                }\r\n\r\n                obj.name = name;\r\n                obj.def = def;\r\n            } else {\r\n                obj.name = param;\r\n                obj.def = null;\r\n            }\r\n\r\n            return obj;\r\n        }\r\n\r\n        // Parse a xacro:macro tag\r\n        function parseMacro(node) {\r\n            // get attributes\r\n            const name = node.getAttribute('name').replace(/^xacro:/, '');\r\n            const params = node.getAttribute('params');\r\n\r\n            // parse params\r\n            const inputMap = {};\r\n            if (params) {\r\n                const inputs = params\r\n                    .trim()\r\n                    .split(/\\s+/g)\r\n                    .map(s => parseMacroParam(s));\r\n                inputs.forEach(inp => {\r\n                    inputMap[inp.name] = inp;\r\n                });\r\n            }\r\n\r\n            return {\r\n                name,\r\n                node: deepClone(node, false),\r\n                params: inputMap,\r\n            };\r\n        }\r\n\r\n        // Recursively process and expand a node\r\n        async function processNode(node, properties, macros, resultsList = []) {\r\n            if (node.nodeType !== node.ELEMENT_NODE) {\r\n                const res = node.cloneNode();\r\n                res.textContent = evaluateAttribute(res.textContent, properties, true);\r\n                resultsList.push(res);\r\n                return;\r\n            }\r\n\r\n            let tagName = node.tagName.toLowerCase();\r\n            if (!requirePrefix) {\r\n                switch (tagName) {\r\n\r\n                    case 'arg':\r\n                    case 'property':\r\n                    case 'macro':\r\n                    case 'insert_block':\r\n                    case 'if':\r\n                    case 'unless':\r\n                    case 'include':\r\n                    case 'element':\r\n                    case 'attribute':\r\n                        tagName = `xacro:${ tagName }`;\r\n                        break;\r\n                    default:\r\n                        if (tagName in macros) {\r\n                            tagName = `xacro:${ tagName }`;\r\n                        }\r\n                        break;\r\n\r\n                }\r\n            }\r\n\r\n            switch (tagName) {\r\n\r\n                case 'xacro:property': {\r\n                    removeEndCommentsFromArray(resultsList);\r\n\r\n                    const name = node.getAttribute('name');\r\n\r\n                    let value;\r\n                    if (node.hasAttribute('value')) {\r\n                        value = node.getAttribute('value');\r\n                    } else if (node.hasAttribute('default')) {\r\n                        value = node.getAttribute('default');\r\n                    } else {\r\n                        const childNodes = [...node.childNodes];\r\n                        value = [];\r\n                        for (const c of childNodes) {\r\n                            value.push(deepClone(c, false));\r\n                        }\r\n                    }\r\n\r\n                    let scope = 'global';\r\n                    if (localProperties) {\r\n                        scope = node.getAttribute('scope') || 'local';\r\n                    }\r\n\r\n                    // Emulated behavior here\r\n                    // https://github.com/ros/xacro/blob/melodic-devel/src/xacro/__init__.py#L565\r\n                    if (scope !== 'local') {\r\n                        value = evaluateAttribute(value, properties);\r\n                    }\r\n\r\n                    if (scope === 'global') {\r\n                        globalProperties[name] = value;\r\n                    } else if (scope === 'parent') {\r\n                        properties[PARENT_SCOPE][name] = value;\r\n                    } else {\r\n                        properties[name] = value;\r\n                    }\r\n\r\n                    break;\r\n                }\r\n                case 'xacro:macro': {\r\n                    removeEndCommentsFromArray(resultsList);\r\n\r\n                    const macro = parseMacro(node);\r\n                    macros[macro.name] = macro;\r\n                    break;\r\n                }\r\n                case 'xacro:insert_block': {\r\n                    removeEndCommentsFromArray(resultsList);\r\n\r\n                    const name = node.getAttribute('name');\r\n                    const nodes = properties[name];\r\n\r\n                    for (const c of nodes) {\r\n                        await processNode(c, properties, macros, resultsList);\r\n                    }\r\n                    return;\r\n                }\r\n                case 'xacro:if':\r\n                case 'xacro:unless': {\r\n                    removeEndCommentsFromArray(resultsList);\r\n\r\n                    const value = evaluateAttribute(node.getAttribute('value'), properties, true);\r\n                    let bool = null;\r\n                    if (!isNaN(parseFloat(value))) {\r\n                        bool = !!parseFloat(value);\r\n                    } else if (value === 'true' || value === 'false') {\r\n                        bool = value === 'true';\r\n                    } else {\r\n                        bool = value;\r\n                    }\r\n\r\n                    if (tagName === 'xacro:unless') {\r\n                        bool = !bool;\r\n                    }\r\n\r\n                    if (bool) {\r\n                        const childNodes = [...node.childNodes];\r\n                        for (const c of childNodes) {\r\n                            await processNode(c, properties, macros, resultsList);\r\n                        }\r\n                    }\r\n                    return;\r\n                }\r\n                case 'xacro:include': {\r\n                    removeEndCommentsFromArray(resultsList);\r\n\r\n                    if (node.hasAttribute('ns')) {\r\n                        throw new Error('XacroParser: xacro:include name spaces not supported.');\r\n                    }\r\n                    const filename = evaluateAttribute(node.getAttribute('filename'), properties, true);\r\n                    const isAbsolute = /^[/\\\\]/.test(filename) || /^[a-zA-Z]+:[/\\\\]/.test(filename);\r\n                    const filePath = isAbsolute ? filename : currWorkingPath + filename;\r\n\r\n                    const prevWorkingPath = currWorkingPath;\r\n                    currWorkingPath = getUrlBase(filePath);\r\n\r\n                    const includeContent = await loadInclude(filePath);\r\n                    const childNodes = [...includeContent.children[0].childNodes];\r\n                    for (const c of childNodes) {\r\n                        await processNode(c, properties, macros, resultsList);\r\n                    }\r\n\r\n                    currWorkingPath = prevWorkingPath;\r\n                    return;\r\n                }\r\n                case 'xacro:arg':\r\n                case 'xacro:attribute':\r\n                case 'xacro:element':\r\n                    throw new Error(`XacroParser: ${ tagName } tags not supported.`);\r\n                default: {\r\n                    // TODO: check if there's a 'call' attribute here which indicates that\r\n                    // a macro should be invoked?\r\n                    if (/^xacro:/.test(tagName) || tagName in macros) {\r\n                        removeEndCommentsFromArray(resultsList);\r\n\r\n                        return evaluateMacro(node, properties, macros, resultsList);\r\n                    } else {\r\n\r\n                        const res = node.cloneNode();\r\n                        for (let i = 0, l = res.attributes.length; i < l; i++) {\r\n                            const attr = res.attributes[i];\r\n                            const value = evaluateAttribute(attr.value, properties, true);\r\n                            res.setAttribute(attr.name, value);\r\n                        }\r\n\r\n                        const childNodes = [...node.childNodes];\r\n                        const resultChildren = [];\r\n                        for (let i = 0, l = childNodes.length; i < l; i++) {\r\n                            await processNode(childNodes[i], properties, macros, resultChildren);\r\n                        }\r\n                        resultChildren.forEach(c => res.appendChild(c));\r\n                        resultsList.push(res);\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        // Process all property and macro tags into the objects\r\n        async function gatherPropertiesAndMacros(el, properties, macros) {\r\n            const propertyEl = getElementsWithName(el, 'xacro:property');\r\n            if (!requirePrefix) {\r\n                propertyEl.push(...getElementsWithName(el, 'property'));\r\n            }\r\n            for (const el of propertyEl) {\r\n                await processNode(el, properties, macros);\r\n            }\r\n\r\n            const macroEl = getElementsWithName(el, 'xacro:macro');\r\n            if (!requirePrefix) {\r\n                macroEl.push(...getElementsWithName(el, 'macro'));\r\n            }\r\n            for (const el of macroEl) {\r\n                await processNode(el, properties, macros);\r\n            }\r\n        }\r\n\r\n        // Process a document node with a new property and macro scope\r\n        async function processXacro(xacro, properties, macros) {\r\n            const res = xacro.cloneNode();\r\n            for (let i = 0, l = xacro.children.length; i < l; i++) {\r\n                const child = [];\r\n                await processNode(xacro.children[i], properties, macros, child);\r\n\r\n                const root = child[0];\r\n                root.removeAttribute('xmlns:xacro');\r\n                res.appendChild(root);\r\n            }\r\n            return res;\r\n        }\r\n\r\n        async function loadInclude(path) {\r\n\r\n            try {\r\n                const text = await scope.getFileContents(path);\r\n                return new DOMParser().parseFromString(text, 'text/xml');\r\n            } catch (e) {\r\n                throw new Error(`XacroParser: Could not load included file: ${ path }`);\r\n            }\r\n\r\n        }\r\n\r\n        async function loadIncludes(xacro, workingPath, results = []) {\r\n\r\n            const includeEl = getElementsWithName(xacro, 'xacro:include');\r\n            if (!requirePrefix) {\r\n                includeEl.push(...getElementsWithName(xacro, 'include'));\r\n            }\r\n\r\n            const promises = includeEl.map(el => {\r\n                // TODO: Handle namespaces on the include.\r\n                if (el.hasAttribute('ns')) {\r\n                    throw new Error('XacroParser: xacro:include name spaces not supported.');\r\n                }\r\n\r\n                const filename = el.getAttribute('filename');\r\n                const namespace = el.getAttribute('ns') || null;\r\n                const isAbsolute = /^[/\\\\]/.test(filename) || /^[a-zA-Z]+:[/\\\\]/.test(filename);\r\n                const filePath = isAbsolute ? filename : workingPath + filename;\r\n                const pr = loadInclude(filePath)\r\n                    .then(content => {\r\n                        results.push({ filename, namespace, content });\r\n\r\n                        const relPath = getUrlBase(filePath);\r\n                        return loadIncludes(content, relPath, results);\r\n                    });\r\n                return pr;\r\n            });\r\n\r\n            await Promise.all(promises);\r\n            return results;\r\n        }\r\n\r\n        // TODO: Provide a default \"arg\" command function that defaults to\r\n        // xacro:arg fields.\r\n        const scope = this;\r\n        const inOrder = this.inOrder;\r\n\r\n        // add a file separator to the end of the working path if it's specified\r\n        // and doesn't have one.\r\n        const workingPath = this.workingPath + (this.workingPath && !/[\\\\/]$/.test(this.workingPath) ? '/' : '');\r\n        const requirePrefix = this.requirePrefix;\r\n        const rospackCommands = this.rospackCommands;\r\n        const globalMacros = {};\r\n        const includeMap = {};\r\n        const globalProperties = { True: 1, False: 0 };\r\n        globalProperties[PARENT_SCOPE] = globalProperties;\r\n\r\n        const handleRospackCommand = (stem, ...args) => {\r\n\r\n            if (rospackCommands instanceof Function) {\r\n\r\n                return rospackCommands(stem, ...args);\r\n\r\n            } else {\r\n\r\n                return rospackCommands[stem](...args);\r\n\r\n            }\r\n\r\n        };\r\n        const handleExpressionEvaluation = evaluateExpression;\r\n\r\n        let localProperties = this.localProperties;\r\n        let currWorkingPath = workingPath;\r\n        let content = new DOMParser().parseFromString(data, 'text/xml');\r\n\r\n        if (localProperties && !inOrder) {\r\n            console.warn('XacroParser: Implicitly setting \"localProperties\" option to false because \"inOrder\" is false.');\r\n            localProperties = false;\r\n        }\r\n\r\n        let inOrderPromise = null;\r\n        if (!inOrder) {\r\n            inOrderPromise = (async function() {\r\n                await gatherPropertiesAndMacros(content, globalProperties, globalMacros);\r\n                content = deepClone(content, true);\r\n\r\n                return loadIncludes(content, workingPath)\r\n                    .then(arr => {\r\n                        arr.forEach(inc => {\r\n                            // TODO: handle namespaces here when rolling up properties and macros\r\n                            gatherPropertiesAndMacros(inc.content, globalProperties, globalMacros);\r\n                            inc.content = deepClone(inc.content, true);\r\n                            includeMap[inc.filename] = inc.content;\r\n                        });\r\n                    });\r\n            })();\r\n        } else {\r\n            inOrderPromise = Promise.resolve();\r\n        }\r\n\r\n        await inOrderPromise;\r\n        return processXacro(content, globalProperties, globalMacros);\r\n    }\r\n\r\n}\r\n","import { isNumber } from './utils.js';\r\nimport { Parser } from 'expr-eval';\r\n\r\nconst parser = new Parser();\r\n\r\nparser.unaryOps = {\r\n    '-': parser.unaryOps['-'],\r\n    '+': parser.unaryOps['+'],\r\n    '!': parser.unaryOps['!'],\r\n};\r\n\r\nparser.functions = {\r\n    sin: Math.sin,\r\n    cos: Math.cos,\r\n    tan: Math.tan,\r\n    asin: Math.asin,\r\n    acos: Math.acos,\r\n    atan: Math.atan,\r\n    log: Math.log,\r\n    atan2: Math.atan2,\r\n    pow: Math.pow,\r\n    radians: (degrees) => { return degrees * (Math.PI / 180); },\r\n    degrees: (radians) => { return radians * (180 / Math.PI); },\r\n};\r\n\r\nparser.binaryOps = {\r\n    ...parser.binaryOps,\r\n    '+': (a, b) => {\r\n        if (isNumber(a)) {\r\n            a = Number(a);\r\n        }\r\n\r\n        if (isNumber(b)) {\r\n            b = Number(b);\r\n        }\r\n\r\n        return a + b;\r\n    },\r\n    'in': (a, b) => {\r\n        if (Array.isArray(b)) {\r\n            return b.includes(a);\r\n        } else if (typeof b === 'string') {\r\n            return b.includes(a);\r\n        } else {\r\n            return a in b;\r\n        }\r\n    },\r\n};\r\n\r\nparser.consts = {\r\n    ...parser.consts,\r\n    pi: Math.PI,\r\n    e: Math.E,\r\n};\r\n\r\nexport function evaluateExpression(expr) {\r\n    return parser.evaluate(expr);\r\n}\r\n","var INUMBER = 'INUMBER';\nvar IOP1 = 'IOP1';\nvar IOP2 = 'IOP2';\nvar IOP3 = 'IOP3';\nvar IVAR = 'IVAR';\nvar IVARNAME = 'IVARNAME';\nvar IFUNCALL = 'IFUNCALL';\nvar IFUNDEF = 'IFUNDEF';\nvar IEXPR = 'IEXPR';\nvar IEXPREVAL = 'IEXPREVAL';\nvar IMEMBER = 'IMEMBER';\nvar IENDSTATEMENT = 'IENDSTATEMENT';\nvar IARRAY = 'IARRAY';\n\nfunction Instruction(type, value) {\n  this.type = type;\n  this.value = (value !== undefined && value !== null) ? value : 0;\n}\n\nInstruction.prototype.toString = function () {\n  switch (this.type) {\n    case INUMBER:\n    case IOP1:\n    case IOP2:\n    case IOP3:\n    case IVAR:\n    case IVARNAME:\n    case IENDSTATEMENT:\n      return this.value;\n    case IFUNCALL:\n      return 'CALL ' + this.value;\n    case IFUNDEF:\n      return 'DEF ' + this.value;\n    case IARRAY:\n      return 'ARRAY ' + this.value;\n    case IMEMBER:\n      return '.' + this.value;\n    default:\n      return 'Invalid Instruction';\n  }\n};\n\nfunction unaryInstruction(value) {\n  return new Instruction(IOP1, value);\n}\n\nfunction binaryInstruction(value) {\n  return new Instruction(IOP2, value);\n}\n\nfunction ternaryInstruction(value) {\n  return new Instruction(IOP3, value);\n}\n\nfunction simplify(tokens, unaryOps, binaryOps, ternaryOps, values) {\n  var nstack = [];\n  var newexpression = [];\n  var n1, n2, n3;\n  var f;\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER || type === IVARNAME) {\n      if (Array.isArray(item.value)) {\n        nstack.push.apply(nstack, simplify(item.value.map(function (x) {\n          return new Instruction(INUMBER, x);\n        }).concat(new Instruction(IARRAY, item.value.length)), unaryOps, binaryOps, ternaryOps, values));\n      } else {\n        nstack.push(item);\n      }\n    } else if (type === IVAR && values.hasOwnProperty(item.value)) {\n      item = new Instruction(INUMBER, values[item.value]);\n      nstack.push(item);\n    } else if (type === IOP2 && nstack.length > 1) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = binaryOps[item.value];\n      item = new Instruction(INUMBER, f(n1.value, n2.value));\n      nstack.push(item);\n    } else if (type === IOP3 && nstack.length > 2) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      if (item.value === '?') {\n        nstack.push(n1.value ? n2.value : n3.value);\n      } else {\n        f = ternaryOps[item.value];\n        item = new Instruction(INUMBER, f(n1.value, n2.value, n3.value));\n        nstack.push(item);\n      }\n    } else if (type === IOP1 && nstack.length > 0) {\n      n1 = nstack.pop();\n      f = unaryOps[item.value];\n      item = new Instruction(INUMBER, f(n1.value));\n      nstack.push(item);\n    } else if (type === IEXPR) {\n      while (nstack.length > 0) {\n        newexpression.push(nstack.shift());\n      }\n      newexpression.push(new Instruction(IEXPR, simplify(item.value, unaryOps, binaryOps, ternaryOps, values)));\n    } else if (type === IMEMBER && nstack.length > 0) {\n      n1 = nstack.pop();\n      nstack.push(new Instruction(INUMBER, n1.value[item.value]));\n    } /* else if (type === IARRAY && nstack.length >= item.value) {\n      var length = item.value;\n      while (length-- > 0) {\n        newexpression.push(nstack.pop());\n      }\n      newexpression.push(new Instruction(IARRAY, item.value));\n    } */ else {\n      while (nstack.length > 0) {\n        newexpression.push(nstack.shift());\n      }\n      newexpression.push(item);\n    }\n  }\n  while (nstack.length > 0) {\n    newexpression.push(nstack.shift());\n  }\n  return newexpression;\n}\n\nfunction substitute(tokens, variable, expr) {\n  var newexpression = [];\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === IVAR && item.value === variable) {\n      for (var j = 0; j < expr.tokens.length; j++) {\n        var expritem = expr.tokens[j];\n        var replitem;\n        if (expritem.type === IOP1) {\n          replitem = unaryInstruction(expritem.value);\n        } else if (expritem.type === IOP2) {\n          replitem = binaryInstruction(expritem.value);\n        } else if (expritem.type === IOP3) {\n          replitem = ternaryInstruction(expritem.value);\n        } else {\n          replitem = new Instruction(expritem.type, expritem.value);\n        }\n        newexpression.push(replitem);\n      }\n    } else if (type === IEXPR) {\n      newexpression.push(new Instruction(IEXPR, substitute(item.value, variable, expr)));\n    } else {\n      newexpression.push(item);\n    }\n  }\n  return newexpression;\n}\n\nfunction evaluate(tokens, expr, values) {\n  var nstack = [];\n  var n1, n2, n3;\n  var f, args, argCount;\n\n  if (isExpressionEvaluator(tokens)) {\n    return resolveExpression(tokens, values);\n  }\n\n  var numTokens = tokens.length;\n\n  for (var i = 0; i < numTokens; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER || type === IVARNAME) {\n      nstack.push(item.value);\n    } else if (type === IOP2) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      if (item.value === 'and') {\n        nstack.push(n1 ? !!evaluate(n2, expr, values) : false);\n      } else if (item.value === 'or') {\n        nstack.push(n1 ? true : !!evaluate(n2, expr, values));\n      } else if (item.value === '=') {\n        f = expr.binaryOps[item.value];\n        nstack.push(f(n1, evaluate(n2, expr, values), values));\n      } else {\n        f = expr.binaryOps[item.value];\n        nstack.push(f(resolveExpression(n1, values), resolveExpression(n2, values)));\n      }\n    } else if (type === IOP3) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      if (item.value === '?') {\n        nstack.push(evaluate(n1 ? n2 : n3, expr, values));\n      } else {\n        f = expr.ternaryOps[item.value];\n        nstack.push(f(resolveExpression(n1, values), resolveExpression(n2, values), resolveExpression(n3, values)));\n      }\n    } else if (type === IVAR) {\n      if (item.value in expr.functions) {\n        nstack.push(expr.functions[item.value]);\n      } else if (item.value in expr.unaryOps && expr.parser.isOperatorEnabled(item.value)) {\n        nstack.push(expr.unaryOps[item.value]);\n      } else {\n        var v = values[item.value];\n        if (v !== undefined) {\n          nstack.push(v);\n        } else {\n          throw new Error('undefined variable: ' + item.value);\n        }\n      }\n    } else if (type === IOP1) {\n      n1 = nstack.pop();\n      f = expr.unaryOps[item.value];\n      nstack.push(f(resolveExpression(n1, values)));\n    } else if (type === IFUNCALL) {\n      argCount = item.value;\n      args = [];\n      while (argCount-- > 0) {\n        args.unshift(resolveExpression(nstack.pop(), values));\n      }\n      f = nstack.pop();\n      if (f.apply && f.call) {\n        nstack.push(f.apply(undefined, args));\n      } else {\n        throw new Error(f + ' is not a function');\n      }\n    } else if (type === IFUNDEF) {\n      // Create closure to keep references to arguments and expression\n      nstack.push((function () {\n        var n2 = nstack.pop();\n        var args = [];\n        var argCount = item.value;\n        while (argCount-- > 0) {\n          args.unshift(nstack.pop());\n        }\n        var n1 = nstack.pop();\n        var f = function () {\n          var scope = Object.assign({}, values);\n          for (var i = 0, len = args.length; i < len; i++) {\n            scope[args[i]] = arguments[i];\n          }\n          return evaluate(n2, expr, scope);\n        };\n        // f.name = n1\n        Object.defineProperty(f, 'name', {\n          value: n1,\n          writable: false\n        });\n        values[n1] = f;\n        return f;\n      })());\n    } else if (type === IEXPR) {\n      nstack.push(createExpressionEvaluator(item, expr));\n    } else if (type === IEXPREVAL) {\n      nstack.push(item);\n    } else if (type === IMEMBER) {\n      n1 = nstack.pop();\n      nstack.push(n1[item.value]);\n    } else if (type === IENDSTATEMENT) {\n      nstack.pop();\n    } else if (type === IARRAY) {\n      argCount = item.value;\n      args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      nstack.push(args);\n    } else {\n      throw new Error('invalid Expression');\n    }\n  }\n  if (nstack.length > 1) {\n    throw new Error('invalid Expression (parity)');\n  }\n  // Explicitly return zero to avoid test issues caused by -0\n  return nstack[0] === 0 ? 0 : resolveExpression(nstack[0], values);\n}\n\nfunction createExpressionEvaluator(token, expr, values) {\n  if (isExpressionEvaluator(token)) return token;\n  return {\n    type: IEXPREVAL,\n    value: function (scope) {\n      return evaluate(token.value, expr, scope);\n    }\n  };\n}\n\nfunction isExpressionEvaluator(n) {\n  return n && n.type === IEXPREVAL;\n}\n\nfunction resolveExpression(n, values) {\n  return isExpressionEvaluator(n) ? n.value(values) : n;\n}\n\nfunction expressionToString(tokens, toJS) {\n  var nstack = [];\n  var n1, n2, n3;\n  var f, args, argCount;\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER) {\n      if (typeof item.value === 'number' && item.value < 0) {\n        nstack.push('(' + item.value + ')');\n      } else if (Array.isArray(item.value)) {\n        nstack.push('[' + item.value.map(escapeValue).join(', ') + ']');\n      } else {\n        nstack.push(escapeValue(item.value));\n      }\n    } else if (type === IOP2) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = item.value;\n      if (toJS) {\n        if (f === '^') {\n          nstack.push('Math.pow(' + n1 + ', ' + n2 + ')');\n        } else if (f === 'and') {\n          nstack.push('(!!' + n1 + ' && !!' + n2 + ')');\n        } else if (f === 'or') {\n          nstack.push('(!!' + n1 + ' || !!' + n2 + ')');\n        } else if (f === '||') {\n          nstack.push('(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }((' + n1 + '),(' + n2 + ')))');\n        } else if (f === '==') {\n          nstack.push('(' + n1 + ' === ' + n2 + ')');\n        } else if (f === '!=') {\n          nstack.push('(' + n1 + ' !== ' + n2 + ')');\n        } else if (f === '[') {\n          nstack.push(n1 + '[(' + n2 + ') | 0]');\n        } else {\n          nstack.push('(' + n1 + ' ' + f + ' ' + n2 + ')');\n        }\n      } else {\n        if (f === '[') {\n          nstack.push(n1 + '[' + n2 + ']');\n        } else {\n          nstack.push('(' + n1 + ' ' + f + ' ' + n2 + ')');\n        }\n      }\n    } else if (type === IOP3) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = item.value;\n      if (f === '?') {\n        nstack.push('(' + n1 + ' ? ' + n2 + ' : ' + n3 + ')');\n      } else {\n        throw new Error('invalid Expression');\n      }\n    } else if (type === IVAR || type === IVARNAME) {\n      nstack.push(item.value);\n    } else if (type === IOP1) {\n      n1 = nstack.pop();\n      f = item.value;\n      if (f === '-' || f === '+') {\n        nstack.push('(' + f + n1 + ')');\n      } else if (toJS) {\n        if (f === 'not') {\n          nstack.push('(' + '!' + n1 + ')');\n        } else if (f === '!') {\n          nstack.push('fac(' + n1 + ')');\n        } else {\n          nstack.push(f + '(' + n1 + ')');\n        }\n      } else if (f === '!') {\n        nstack.push('(' + n1 + '!)');\n      } else {\n        nstack.push('(' + f + ' ' + n1 + ')');\n      }\n    } else if (type === IFUNCALL) {\n      argCount = item.value;\n      args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      f = nstack.pop();\n      nstack.push(f + '(' + args.join(', ') + ')');\n    } else if (type === IFUNDEF) {\n      n2 = nstack.pop();\n      argCount = item.value;\n      args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      n1 = nstack.pop();\n      if (toJS) {\n        nstack.push('(' + n1 + ' = function(' + args.join(', ') + ') { return ' + n2 + ' })');\n      } else {\n        nstack.push('(' + n1 + '(' + args.join(', ') + ') = ' + n2 + ')');\n      }\n    } else if (type === IMEMBER) {\n      n1 = nstack.pop();\n      nstack.push(n1 + '.' + item.value);\n    } else if (type === IARRAY) {\n      argCount = item.value;\n      args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      nstack.push('[' + args.join(', ') + ']');\n    } else if (type === IEXPR) {\n      nstack.push('(' + expressionToString(item.value, toJS) + ')');\n    } else if (type === IENDSTATEMENT) ; else {\n      throw new Error('invalid Expression');\n    }\n  }\n  if (nstack.length > 1) {\n    if (toJS) {\n      nstack = [ nstack.join(',') ];\n    } else {\n      nstack = [ nstack.join(';') ];\n    }\n  }\n  return String(nstack[0]);\n}\n\nfunction escapeValue(v) {\n  if (typeof v === 'string') {\n    return JSON.stringify(v).replace(/\\u2028/g, '\\\\u2028').replace(/\\u2029/g, '\\\\u2029');\n  }\n  return v;\n}\n\nfunction contains(array, obj) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === obj) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getSymbols(tokens, symbols, options) {\n  options = options || {};\n  var withMembers = !!options.withMembers;\n  var prevVar = null;\n\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    if (item.type === IVAR || item.type === IVARNAME) {\n      if (!withMembers && !contains(symbols, item.value)) {\n        symbols.push(item.value);\n      } else if (prevVar !== null) {\n        if (!contains(symbols, prevVar)) {\n          symbols.push(prevVar);\n        }\n        prevVar = item.value;\n      } else {\n        prevVar = item.value;\n      }\n    } else if (item.type === IMEMBER && withMembers && prevVar !== null) {\n      prevVar += '.' + item.value;\n    } else if (item.type === IEXPR) {\n      getSymbols(item.value, symbols, options);\n    } else if (prevVar !== null) {\n      if (!contains(symbols, prevVar)) {\n        symbols.push(prevVar);\n      }\n      prevVar = null;\n    }\n  }\n\n  if (prevVar !== null && !contains(symbols, prevVar)) {\n    symbols.push(prevVar);\n  }\n}\n\nfunction Expression(tokens, parser) {\n  this.tokens = tokens;\n  this.parser = parser;\n  this.unaryOps = parser.unaryOps;\n  this.binaryOps = parser.binaryOps;\n  this.ternaryOps = parser.ternaryOps;\n  this.functions = parser.functions;\n}\n\nExpression.prototype.simplify = function (values) {\n  values = values || {};\n  return new Expression(simplify(this.tokens, this.unaryOps, this.binaryOps, this.ternaryOps, values), this.parser);\n};\n\nExpression.prototype.substitute = function (variable, expr) {\n  if (!(expr instanceof Expression)) {\n    expr = this.parser.parse(String(expr));\n  }\n\n  return new Expression(substitute(this.tokens, variable, expr), this.parser);\n};\n\nExpression.prototype.evaluate = function (values) {\n  values = values || {};\n  return evaluate(this.tokens, this, values);\n};\n\nExpression.prototype.toString = function () {\n  return expressionToString(this.tokens, false);\n};\n\nExpression.prototype.symbols = function (options) {\n  options = options || {};\n  var vars = [];\n  getSymbols(this.tokens, vars, options);\n  return vars;\n};\n\nExpression.prototype.variables = function (options) {\n  options = options || {};\n  var vars = [];\n  getSymbols(this.tokens, vars, options);\n  var functions = this.functions;\n  return vars.filter(function (name) {\n    return !(name in functions);\n  });\n};\n\nExpression.prototype.toJSFunction = function (param, variables) {\n  var expr = this;\n  var f = new Function(param, 'with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return ' + expressionToString(this.simplify(variables).tokens, true) + '; }'); // eslint-disable-line no-new-func\n  return function () {\n    return f.apply(expr, arguments);\n  };\n};\n\nvar TEOF = 'TEOF';\nvar TOP = 'TOP';\nvar TNUMBER = 'TNUMBER';\nvar TSTRING = 'TSTRING';\nvar TPAREN = 'TPAREN';\nvar TBRACKET = 'TBRACKET';\nvar TCOMMA = 'TCOMMA';\nvar TNAME = 'TNAME';\nvar TSEMICOLON = 'TSEMICOLON';\n\nfunction Token(type, value, index) {\n  this.type = type;\n  this.value = value;\n  this.index = index;\n}\n\nToken.prototype.toString = function () {\n  return this.type + ': ' + this.value;\n};\n\nfunction TokenStream(parser, expression) {\n  this.pos = 0;\n  this.current = null;\n  this.unaryOps = parser.unaryOps;\n  this.binaryOps = parser.binaryOps;\n  this.ternaryOps = parser.ternaryOps;\n  this.consts = parser.consts;\n  this.expression = expression;\n  this.savedPosition = 0;\n  this.savedCurrent = null;\n  this.options = parser.options;\n  this.parser = parser;\n}\n\nTokenStream.prototype.newToken = function (type, value, pos) {\n  return new Token(type, value, pos != null ? pos : this.pos);\n};\n\nTokenStream.prototype.save = function () {\n  this.savedPosition = this.pos;\n  this.savedCurrent = this.current;\n};\n\nTokenStream.prototype.restore = function () {\n  this.pos = this.savedPosition;\n  this.current = this.savedCurrent;\n};\n\nTokenStream.prototype.next = function () {\n  if (this.pos >= this.expression.length) {\n    return this.newToken(TEOF, 'EOF');\n  }\n\n  if (this.isWhitespace() || this.isComment()) {\n    return this.next();\n  } else if (this.isRadixInteger() ||\n      this.isNumber() ||\n      this.isOperator() ||\n      this.isString() ||\n      this.isParen() ||\n      this.isBracket() ||\n      this.isComma() ||\n      this.isSemicolon() ||\n      this.isNamedOp() ||\n      this.isConst() ||\n      this.isName()) {\n    return this.current;\n  } else {\n    this.parseError('Unknown character \"' + this.expression.charAt(this.pos) + '\"');\n  }\n};\n\nTokenStream.prototype.isString = function () {\n  var r = false;\n  var startPos = this.pos;\n  var quote = this.expression.charAt(startPos);\n\n  if (quote === '\\'' || quote === '\"') {\n    var index = this.expression.indexOf(quote, startPos + 1);\n    while (index >= 0 && this.pos < this.expression.length) {\n      this.pos = index + 1;\n      if (this.expression.charAt(index - 1) !== '\\\\') {\n        var rawString = this.expression.substring(startPos + 1, index);\n        this.current = this.newToken(TSTRING, this.unescape(rawString), startPos);\n        r = true;\n        break;\n      }\n      index = this.expression.indexOf(quote, index + 1);\n    }\n  }\n  return r;\n};\n\nTokenStream.prototype.isParen = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === '(' || c === ')') {\n    this.current = this.newToken(TPAREN, c);\n    this.pos++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isBracket = function () {\n  var c = this.expression.charAt(this.pos);\n  if ((c === '[' || c === ']') && this.isOperatorEnabled('[')) {\n    this.current = this.newToken(TBRACKET, c);\n    this.pos++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isComma = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === ',') {\n    this.current = this.newToken(TCOMMA, ',');\n    this.pos++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isSemicolon = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === ';') {\n    this.current = this.newToken(TSEMICOLON, ';');\n    this.pos++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isConst = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos || (c !== '_' && c !== '.' && (c < '0' || c > '9'))) {\n        break;\n      }\n    }\n  }\n  if (i > startPos) {\n    var str = this.expression.substring(startPos, i);\n    if (str in this.consts) {\n      this.current = this.newToken(TNUMBER, this.consts[str]);\n      this.pos += str.length;\n      return true;\n    }\n  }\n  return false;\n};\n\nTokenStream.prototype.isNamedOp = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos || (c !== '_' && (c < '0' || c > '9'))) {\n        break;\n      }\n    }\n  }\n  if (i > startPos) {\n    var str = this.expression.substring(startPos, i);\n    if (this.isOperatorEnabled(str) && (str in this.binaryOps || str in this.unaryOps || str in this.ternaryOps)) {\n      this.current = this.newToken(TOP, str);\n      this.pos += str.length;\n      return true;\n    }\n  }\n  return false;\n};\n\nTokenStream.prototype.isName = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  var hasLetter = false;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos && (c === '$' || c === '_')) {\n        if (c === '_') {\n          hasLetter = true;\n        }\n        continue;\n      } else if (i === this.pos || !hasLetter || (c !== '_' && (c < '0' || c > '9'))) {\n        break;\n      }\n    } else {\n      hasLetter = true;\n    }\n  }\n  if (hasLetter) {\n    var str = this.expression.substring(startPos, i);\n    this.current = this.newToken(TNAME, str);\n    this.pos += str.length;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isWhitespace = function () {\n  var r = false;\n  var c = this.expression.charAt(this.pos);\n  while (c === ' ' || c === '\\t' || c === '\\n' || c === '\\r') {\n    r = true;\n    this.pos++;\n    if (this.pos >= this.expression.length) {\n      break;\n    }\n    c = this.expression.charAt(this.pos);\n  }\n  return r;\n};\n\nvar codePointPattern = /^[0-9a-f]{4}$/i;\n\nTokenStream.prototype.unescape = function (v) {\n  var index = v.indexOf('\\\\');\n  if (index < 0) {\n    return v;\n  }\n\n  var buffer = v.substring(0, index);\n  while (index >= 0) {\n    var c = v.charAt(++index);\n    switch (c) {\n      case '\\'':\n        buffer += '\\'';\n        break;\n      case '\"':\n        buffer += '\"';\n        break;\n      case '\\\\':\n        buffer += '\\\\';\n        break;\n      case '/':\n        buffer += '/';\n        break;\n      case 'b':\n        buffer += '\\b';\n        break;\n      case 'f':\n        buffer += '\\f';\n        break;\n      case 'n':\n        buffer += '\\n';\n        break;\n      case 'r':\n        buffer += '\\r';\n        break;\n      case 't':\n        buffer += '\\t';\n        break;\n      case 'u':\n        // interpret the following 4 characters as the hex of the unicode code point\n        var codePoint = v.substring(index + 1, index + 5);\n        if (!codePointPattern.test(codePoint)) {\n          this.parseError('Illegal escape sequence: \\\\u' + codePoint);\n        }\n        buffer += String.fromCharCode(parseInt(codePoint, 16));\n        index += 4;\n        break;\n      default:\n        throw this.parseError('Illegal escape sequence: \"\\\\' + c + '\"');\n    }\n    ++index;\n    var backslash = v.indexOf('\\\\', index);\n    buffer += v.substring(index, backslash < 0 ? v.length : backslash);\n    index = backslash;\n  }\n\n  return buffer;\n};\n\nTokenStream.prototype.isComment = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === '/' && this.expression.charAt(this.pos + 1) === '*') {\n    this.pos = this.expression.indexOf('*/', this.pos) + 2;\n    if (this.pos === 1) {\n      this.pos = this.expression.length;\n    }\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isRadixInteger = function () {\n  var pos = this.pos;\n\n  if (pos >= this.expression.length - 2 || this.expression.charAt(pos) !== '0') {\n    return false;\n  }\n  ++pos;\n\n  var radix;\n  var validDigit;\n  if (this.expression.charAt(pos) === 'x') {\n    radix = 16;\n    validDigit = /^[0-9a-f]$/i;\n    ++pos;\n  } else if (this.expression.charAt(pos) === 'b') {\n    radix = 2;\n    validDigit = /^[01]$/i;\n    ++pos;\n  } else {\n    return false;\n  }\n\n  var valid = false;\n  var startPos = pos;\n\n  while (pos < this.expression.length) {\n    var c = this.expression.charAt(pos);\n    if (validDigit.test(c)) {\n      pos++;\n      valid = true;\n    } else {\n      break;\n    }\n  }\n\n  if (valid) {\n    this.current = this.newToken(TNUMBER, parseInt(this.expression.substring(startPos, pos), radix));\n    this.pos = pos;\n  }\n  return valid;\n};\n\nTokenStream.prototype.isNumber = function () {\n  var valid = false;\n  var pos = this.pos;\n  var startPos = pos;\n  var resetPos = pos;\n  var foundDot = false;\n  var foundDigits = false;\n  var c;\n\n  while (pos < this.expression.length) {\n    c = this.expression.charAt(pos);\n    if ((c >= '0' && c <= '9') || (!foundDot && c === '.')) {\n      if (c === '.') {\n        foundDot = true;\n      } else {\n        foundDigits = true;\n      }\n      pos++;\n      valid = foundDigits;\n    } else {\n      break;\n    }\n  }\n\n  if (valid) {\n    resetPos = pos;\n  }\n\n  if (c === 'e' || c === 'E') {\n    pos++;\n    var acceptSign = true;\n    var validExponent = false;\n    while (pos < this.expression.length) {\n      c = this.expression.charAt(pos);\n      if (acceptSign && (c === '+' || c === '-')) {\n        acceptSign = false;\n      } else if (c >= '0' && c <= '9') {\n        validExponent = true;\n        acceptSign = false;\n      } else {\n        break;\n      }\n      pos++;\n    }\n\n    if (!validExponent) {\n      pos = resetPos;\n    }\n  }\n\n  if (valid) {\n    this.current = this.newToken(TNUMBER, parseFloat(this.expression.substring(startPos, pos)));\n    this.pos = pos;\n  } else {\n    this.pos = resetPos;\n  }\n  return valid;\n};\n\nTokenStream.prototype.isOperator = function () {\n  var startPos = this.pos;\n  var c = this.expression.charAt(this.pos);\n\n  if (c === '+' || c === '-' || c === '*' || c === '/' || c === '%' || c === '^' || c === '?' || c === ':' || c === '.') {\n    this.current = this.newToken(TOP, c);\n  } else if (c === '∙' || c === '•') {\n    this.current = this.newToken(TOP, '*');\n  } else if (c === '>') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '>=');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, '>');\n    }\n  } else if (c === '<') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '<=');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, '<');\n    }\n  } else if (c === '|') {\n    if (this.expression.charAt(this.pos + 1) === '|') {\n      this.current = this.newToken(TOP, '||');\n      this.pos++;\n    } else {\n      return false;\n    }\n  } else if (c === '=') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '==');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, c);\n    }\n  } else if (c === '!') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '!=');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, c);\n    }\n  } else {\n    return false;\n  }\n  this.pos++;\n\n  if (this.isOperatorEnabled(this.current.value)) {\n    return true;\n  } else {\n    this.pos = startPos;\n    return false;\n  }\n};\n\nTokenStream.prototype.isOperatorEnabled = function (op) {\n  return this.parser.isOperatorEnabled(op);\n};\n\nTokenStream.prototype.getCoordinates = function () {\n  var line = 0;\n  var column;\n  var newline = -1;\n  do {\n    line++;\n    column = this.pos - newline;\n    newline = this.expression.indexOf('\\n', newline + 1);\n  } while (newline >= 0 && newline < this.pos);\n\n  return {\n    line: line,\n    column: column\n  };\n};\n\nTokenStream.prototype.parseError = function (msg) {\n  var coords = this.getCoordinates();\n  throw new Error('parse error [' + coords.line + ':' + coords.column + ']: ' + msg);\n};\n\nfunction ParserState(parser, tokenStream, options) {\n  this.parser = parser;\n  this.tokens = tokenStream;\n  this.current = null;\n  this.nextToken = null;\n  this.next();\n  this.savedCurrent = null;\n  this.savedNextToken = null;\n  this.allowMemberAccess = options.allowMemberAccess !== false;\n}\n\nParserState.prototype.next = function () {\n  this.current = this.nextToken;\n  return (this.nextToken = this.tokens.next());\n};\n\nParserState.prototype.tokenMatches = function (token, value) {\n  if (typeof value === 'undefined') {\n    return true;\n  } else if (Array.isArray(value)) {\n    return contains(value, token.value);\n  } else if (typeof value === 'function') {\n    return value(token);\n  } else {\n    return token.value === value;\n  }\n};\n\nParserState.prototype.save = function () {\n  this.savedCurrent = this.current;\n  this.savedNextToken = this.nextToken;\n  this.tokens.save();\n};\n\nParserState.prototype.restore = function () {\n  this.tokens.restore();\n  this.current = this.savedCurrent;\n  this.nextToken = this.savedNextToken;\n};\n\nParserState.prototype.accept = function (type, value) {\n  if (this.nextToken.type === type && this.tokenMatches(this.nextToken, value)) {\n    this.next();\n    return true;\n  }\n  return false;\n};\n\nParserState.prototype.expect = function (type, value) {\n  if (!this.accept(type, value)) {\n    var coords = this.tokens.getCoordinates();\n    throw new Error('parse error [' + coords.line + ':' + coords.column + ']: Expected ' + (value || type));\n  }\n};\n\nParserState.prototype.parseAtom = function (instr) {\n  var unaryOps = this.tokens.unaryOps;\n  function isPrefixOperator(token) {\n    return token.value in unaryOps;\n  }\n\n  if (this.accept(TNAME) || this.accept(TOP, isPrefixOperator)) {\n    instr.push(new Instruction(IVAR, this.current.value));\n  } else if (this.accept(TNUMBER)) {\n    instr.push(new Instruction(INUMBER, this.current.value));\n  } else if (this.accept(TSTRING)) {\n    instr.push(new Instruction(INUMBER, this.current.value));\n  } else if (this.accept(TPAREN, '(')) {\n    this.parseExpression(instr);\n    this.expect(TPAREN, ')');\n  } else if (this.accept(TBRACKET, '[')) {\n    if (this.accept(TBRACKET, ']')) {\n      instr.push(new Instruction(IARRAY, 0));\n    } else {\n      var argCount = this.parseArrayList(instr);\n      instr.push(new Instruction(IARRAY, argCount));\n    }\n  } else {\n    throw new Error('unexpected ' + this.nextToken);\n  }\n};\n\nParserState.prototype.parseExpression = function (instr) {\n  var exprInstr = [];\n  if (this.parseUntilEndStatement(instr, exprInstr)) {\n    return;\n  }\n  this.parseVariableAssignmentExpression(exprInstr);\n  if (this.parseUntilEndStatement(instr, exprInstr)) {\n    return;\n  }\n  this.pushExpression(instr, exprInstr);\n};\n\nParserState.prototype.pushExpression = function (instr, exprInstr) {\n  for (var i = 0, len = exprInstr.length; i < len; i++) {\n    instr.push(exprInstr[i]);\n  }\n};\n\nParserState.prototype.parseUntilEndStatement = function (instr, exprInstr) {\n  if (!this.accept(TSEMICOLON)) return false;\n  if (this.nextToken && this.nextToken.type !== TEOF && !(this.nextToken.type === TPAREN && this.nextToken.value === ')')) {\n    exprInstr.push(new Instruction(IENDSTATEMENT));\n  }\n  if (this.nextToken.type !== TEOF) {\n    this.parseExpression(exprInstr);\n  }\n  instr.push(new Instruction(IEXPR, exprInstr));\n  return true;\n};\n\nParserState.prototype.parseArrayList = function (instr) {\n  var argCount = 0;\n\n  while (!this.accept(TBRACKET, ']')) {\n    this.parseExpression(instr);\n    ++argCount;\n    while (this.accept(TCOMMA)) {\n      this.parseExpression(instr);\n      ++argCount;\n    }\n  }\n\n  return argCount;\n};\n\nParserState.prototype.parseVariableAssignmentExpression = function (instr) {\n  this.parseConditionalExpression(instr);\n  while (this.accept(TOP, '=')) {\n    var varName = instr.pop();\n    var varValue = [];\n    var lastInstrIndex = instr.length - 1;\n    if (varName.type === IFUNCALL) {\n      if (!this.tokens.isOperatorEnabled('()=')) {\n        throw new Error('function definition is not permitted');\n      }\n      for (var i = 0, len = varName.value + 1; i < len; i++) {\n        var index = lastInstrIndex - i;\n        if (instr[index].type === IVAR) {\n          instr[index] = new Instruction(IVARNAME, instr[index].value);\n        }\n      }\n      this.parseVariableAssignmentExpression(varValue);\n      instr.push(new Instruction(IEXPR, varValue));\n      instr.push(new Instruction(IFUNDEF, varName.value));\n      continue;\n    }\n    if (varName.type !== IVAR && varName.type !== IMEMBER) {\n      throw new Error('expected variable for assignment');\n    }\n    this.parseVariableAssignmentExpression(varValue);\n    instr.push(new Instruction(IVARNAME, varName.value));\n    instr.push(new Instruction(IEXPR, varValue));\n    instr.push(binaryInstruction('='));\n  }\n};\n\nParserState.prototype.parseConditionalExpression = function (instr) {\n  this.parseOrExpression(instr);\n  while (this.accept(TOP, '?')) {\n    var trueBranch = [];\n    var falseBranch = [];\n    this.parseConditionalExpression(trueBranch);\n    this.expect(TOP, ':');\n    this.parseConditionalExpression(falseBranch);\n    instr.push(new Instruction(IEXPR, trueBranch));\n    instr.push(new Instruction(IEXPR, falseBranch));\n    instr.push(ternaryInstruction('?'));\n  }\n};\n\nParserState.prototype.parseOrExpression = function (instr) {\n  this.parseAndExpression(instr);\n  while (this.accept(TOP, 'or')) {\n    var falseBranch = [];\n    this.parseAndExpression(falseBranch);\n    instr.push(new Instruction(IEXPR, falseBranch));\n    instr.push(binaryInstruction('or'));\n  }\n};\n\nParserState.prototype.parseAndExpression = function (instr) {\n  this.parseComparison(instr);\n  while (this.accept(TOP, 'and')) {\n    var trueBranch = [];\n    this.parseComparison(trueBranch);\n    instr.push(new Instruction(IEXPR, trueBranch));\n    instr.push(binaryInstruction('and'));\n  }\n};\n\nvar COMPARISON_OPERATORS = ['==', '!=', '<', '<=', '>=', '>', 'in'];\n\nParserState.prototype.parseComparison = function (instr) {\n  this.parseAddSub(instr);\n  while (this.accept(TOP, COMPARISON_OPERATORS)) {\n    var op = this.current;\n    this.parseAddSub(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nvar ADD_SUB_OPERATORS = ['+', '-', '||'];\n\nParserState.prototype.parseAddSub = function (instr) {\n  this.parseTerm(instr);\n  while (this.accept(TOP, ADD_SUB_OPERATORS)) {\n    var op = this.current;\n    this.parseTerm(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nvar TERM_OPERATORS = ['*', '/', '%'];\n\nParserState.prototype.parseTerm = function (instr) {\n  this.parseFactor(instr);\n  while (this.accept(TOP, TERM_OPERATORS)) {\n    var op = this.current;\n    this.parseFactor(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nParserState.prototype.parseFactor = function (instr) {\n  var unaryOps = this.tokens.unaryOps;\n  function isPrefixOperator(token) {\n    return token.value in unaryOps;\n  }\n\n  this.save();\n  if (this.accept(TOP, isPrefixOperator)) {\n    if (this.current.value !== '-' && this.current.value !== '+') {\n      if (this.nextToken.type === TPAREN && this.nextToken.value === '(') {\n        this.restore();\n        this.parseExponential(instr);\n        return;\n      } else if (this.nextToken.type === TSEMICOLON || this.nextToken.type === TCOMMA || this.nextToken.type === TEOF || (this.nextToken.type === TPAREN && this.nextToken.value === ')')) {\n        this.restore();\n        this.parseAtom(instr);\n        return;\n      }\n    }\n\n    var op = this.current;\n    this.parseFactor(instr);\n    instr.push(unaryInstruction(op.value));\n  } else {\n    this.parseExponential(instr);\n  }\n};\n\nParserState.prototype.parseExponential = function (instr) {\n  this.parsePostfixExpression(instr);\n  while (this.accept(TOP, '^')) {\n    this.parseFactor(instr);\n    instr.push(binaryInstruction('^'));\n  }\n};\n\nParserState.prototype.parsePostfixExpression = function (instr) {\n  this.parseFunctionCall(instr);\n  while (this.accept(TOP, '!')) {\n    instr.push(unaryInstruction('!'));\n  }\n};\n\nParserState.prototype.parseFunctionCall = function (instr) {\n  var unaryOps = this.tokens.unaryOps;\n  function isPrefixOperator(token) {\n    return token.value in unaryOps;\n  }\n\n  if (this.accept(TOP, isPrefixOperator)) {\n    var op = this.current;\n    this.parseAtom(instr);\n    instr.push(unaryInstruction(op.value));\n  } else {\n    this.parseMemberExpression(instr);\n    while (this.accept(TPAREN, '(')) {\n      if (this.accept(TPAREN, ')')) {\n        instr.push(new Instruction(IFUNCALL, 0));\n      } else {\n        var argCount = this.parseArgumentList(instr);\n        instr.push(new Instruction(IFUNCALL, argCount));\n      }\n    }\n  }\n};\n\nParserState.prototype.parseArgumentList = function (instr) {\n  var argCount = 0;\n\n  while (!this.accept(TPAREN, ')')) {\n    this.parseExpression(instr);\n    ++argCount;\n    while (this.accept(TCOMMA)) {\n      this.parseExpression(instr);\n      ++argCount;\n    }\n  }\n\n  return argCount;\n};\n\nParserState.prototype.parseMemberExpression = function (instr) {\n  this.parseAtom(instr);\n  while (this.accept(TOP, '.') || this.accept(TBRACKET, '[')) {\n    var op = this.current;\n\n    if (op.value === '.') {\n      if (!this.allowMemberAccess) {\n        throw new Error('unexpected \".\", member access is not permitted');\n      }\n\n      this.expect(TNAME);\n      instr.push(new Instruction(IMEMBER, this.current.value));\n    } else if (op.value === '[') {\n      if (!this.tokens.isOperatorEnabled('[')) {\n        throw new Error('unexpected \"[]\", arrays are disabled');\n      }\n\n      this.parseExpression(instr);\n      this.expect(TBRACKET, ']');\n      instr.push(binaryInstruction('['));\n    } else {\n      throw new Error('unexpected symbol: ' + op.value);\n    }\n  }\n};\n\nfunction add(a, b) {\n  return Number(a) + Number(b);\n}\n\nfunction sub(a, b) {\n  return a - b;\n}\n\nfunction mul(a, b) {\n  return a * b;\n}\n\nfunction div(a, b) {\n  return a / b;\n}\n\nfunction mod(a, b) {\n  return a % b;\n}\n\nfunction concat(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return a.concat(b);\n  }\n  return '' + a + b;\n}\n\nfunction equal(a, b) {\n  return a === b;\n}\n\nfunction notEqual(a, b) {\n  return a !== b;\n}\n\nfunction greaterThan(a, b) {\n  return a > b;\n}\n\nfunction lessThan(a, b) {\n  return a < b;\n}\n\nfunction greaterThanEqual(a, b) {\n  return a >= b;\n}\n\nfunction lessThanEqual(a, b) {\n  return a <= b;\n}\n\nfunction andOperator(a, b) {\n  return Boolean(a && b);\n}\n\nfunction orOperator(a, b) {\n  return Boolean(a || b);\n}\n\nfunction inOperator(a, b) {\n  return contains(b, a);\n}\n\nfunction sinh(a) {\n  return ((Math.exp(a) - Math.exp(-a)) / 2);\n}\n\nfunction cosh(a) {\n  return ((Math.exp(a) + Math.exp(-a)) / 2);\n}\n\nfunction tanh(a) {\n  if (a === Infinity) return 1;\n  if (a === -Infinity) return -1;\n  return (Math.exp(a) - Math.exp(-a)) / (Math.exp(a) + Math.exp(-a));\n}\n\nfunction asinh(a) {\n  if (a === -Infinity) return a;\n  return Math.log(a + Math.sqrt((a * a) + 1));\n}\n\nfunction acosh(a) {\n  return Math.log(a + Math.sqrt((a * a) - 1));\n}\n\nfunction atanh(a) {\n  return (Math.log((1 + a) / (1 - a)) / 2);\n}\n\nfunction log10(a) {\n  return Math.log(a) * Math.LOG10E;\n}\n\nfunction neg(a) {\n  return -a;\n}\n\nfunction not(a) {\n  return !a;\n}\n\nfunction trunc(a) {\n  return a < 0 ? Math.ceil(a) : Math.floor(a);\n}\n\nfunction random(a) {\n  return Math.random() * (a || 1);\n}\n\nfunction factorial(a) { // a!\n  return gamma(a + 1);\n}\n\nfunction isInteger(value) {\n  return isFinite(value) && (value === Math.round(value));\n}\n\nvar GAMMA_G = 4.7421875;\nvar GAMMA_P = [\n  0.99999999999999709182,\n  57.156235665862923517, -59.597960355475491248,\n  14.136097974741747174, -0.49191381609762019978,\n  0.33994649984811888699e-4,\n  0.46523628927048575665e-4, -0.98374475304879564677e-4,\n  0.15808870322491248884e-3, -0.21026444172410488319e-3,\n  0.21743961811521264320e-3, -0.16431810653676389022e-3,\n  0.84418223983852743293e-4, -0.26190838401581408670e-4,\n  0.36899182659531622704e-5\n];\n\n// Gamma function from math.js\nfunction gamma(n) {\n  var t, x;\n\n  if (isInteger(n)) {\n    if (n <= 0) {\n      return isFinite(n) ? Infinity : NaN;\n    }\n\n    if (n > 171) {\n      return Infinity; // Will overflow\n    }\n\n    var value = n - 2;\n    var res = n - 1;\n    while (value > 1) {\n      res *= value;\n      value--;\n    }\n\n    if (res === 0) {\n      res = 1; // 0! is per definition 1\n    }\n\n    return res;\n  }\n\n  if (n < 0.5) {\n    return Math.PI / (Math.sin(Math.PI * n) * gamma(1 - n));\n  }\n\n  if (n >= 171.35) {\n    return Infinity; // will overflow\n  }\n\n  if (n > 85.0) { // Extended Stirling Approx\n    var twoN = n * n;\n    var threeN = twoN * n;\n    var fourN = threeN * n;\n    var fiveN = fourN * n;\n    return Math.sqrt(2 * Math.PI / n) * Math.pow((n / Math.E), n) *\n      (1 + (1 / (12 * n)) + (1 / (288 * twoN)) - (139 / (51840 * threeN)) -\n      (571 / (2488320 * fourN)) + (163879 / (209018880 * fiveN)) +\n      (5246819 / (75246796800 * fiveN * n)));\n  }\n\n  --n;\n  x = GAMMA_P[0];\n  for (var i = 1; i < GAMMA_P.length; ++i) {\n    x += GAMMA_P[i] / (n + i);\n  }\n\n  t = n + GAMMA_G + 0.5;\n  return Math.sqrt(2 * Math.PI) * Math.pow(t, n + 0.5) * Math.exp(-t) * x;\n}\n\nfunction stringOrArrayLength(s) {\n  if (Array.isArray(s)) {\n    return s.length;\n  }\n  return String(s).length;\n}\n\nfunction hypot() {\n  var sum = 0;\n  var larg = 0;\n  for (var i = 0; i < arguments.length; i++) {\n    var arg = Math.abs(arguments[i]);\n    var div;\n    if (larg < arg) {\n      div = larg / arg;\n      sum = (sum * div * div) + 1;\n      larg = arg;\n    } else if (arg > 0) {\n      div = arg / larg;\n      sum += div * div;\n    } else {\n      sum += arg;\n    }\n  }\n  return larg === Infinity ? Infinity : larg * Math.sqrt(sum);\n}\n\nfunction condition(cond, yep, nope) {\n  return cond ? yep : nope;\n}\n\n/**\n* Decimal adjustment of a number.\n* From @escopecz.\n*\n* @param {Number} value The number.\n* @param {Integer} exp  The exponent (the 10 logarithm of the adjustment base).\n* @return {Number} The adjusted value.\n*/\nfunction roundTo(value, exp) {\n  // If the exp is undefined or zero...\n  if (typeof exp === 'undefined' || +exp === 0) {\n    return Math.round(value);\n  }\n  value = +value;\n  exp = -(+exp);\n  // If the value is not a number or the exp is not an integer...\n  if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {\n    return NaN;\n  }\n  // Shift\n  value = value.toString().split('e');\n  value = Math.round(+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));\n  // Shift back\n  value = value.toString().split('e');\n  return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));\n}\n\nfunction setVar(name, value, variables) {\n  if (variables) variables[name] = value;\n  return value;\n}\n\nfunction arrayIndex(array, index) {\n  return array[index | 0];\n}\n\nfunction max(array) {\n  if (arguments.length === 1 && Array.isArray(array)) {\n    return Math.max.apply(Math, array);\n  } else {\n    return Math.max.apply(Math, arguments);\n  }\n}\n\nfunction min(array) {\n  if (arguments.length === 1 && Array.isArray(array)) {\n    return Math.min.apply(Math, array);\n  } else {\n    return Math.min.apply(Math, arguments);\n  }\n}\n\nfunction arrayMap(f, a) {\n  if (typeof f !== 'function') {\n    throw new Error('First argument to map is not a function');\n  }\n  if (!Array.isArray(a)) {\n    throw new Error('Second argument to map is not an array');\n  }\n  return a.map(function (x, i) {\n    return f(x, i);\n  });\n}\n\nfunction arrayFold(f, init, a) {\n  if (typeof f !== 'function') {\n    throw new Error('First argument to fold is not a function');\n  }\n  if (!Array.isArray(a)) {\n    throw new Error('Second argument to fold is not an array');\n  }\n  return a.reduce(function (acc, x, i) {\n    return f(acc, x, i);\n  }, init);\n}\n\nfunction arrayFilter(f, a) {\n  if (typeof f !== 'function') {\n    throw new Error('First argument to filter is not a function');\n  }\n  if (!Array.isArray(a)) {\n    throw new Error('Second argument to filter is not an array');\n  }\n  return a.filter(function (x, i) {\n    return f(x, i);\n  });\n}\n\nfunction stringOrArrayIndexOf(target, s) {\n  if (!(Array.isArray(s) || typeof s === 'string')) {\n    throw new Error('Second argument to indexOf is not a string or array');\n  }\n\n  return s.indexOf(target);\n}\n\nfunction arrayJoin(sep, a) {\n  if (!Array.isArray(a)) {\n    throw new Error('Second argument to join is not an array');\n  }\n\n  return a.join(sep);\n}\n\nfunction sign(x) {\n  return ((x > 0) - (x < 0)) || +x;\n}\n\nvar ONE_THIRD = 1/3;\nfunction cbrt(x) {\n  return x < 0 ? -Math.pow(-x, ONE_THIRD) : Math.pow(x, ONE_THIRD);\n}\n\nfunction expm1(x) {\n  return Math.exp(x) - 1;\n}\n\nfunction log1p(x) {\n  return Math.log(1 + x);\n}\n\nfunction log2(x) {\n  return Math.log(x) / Math.LN2;\n}\n\nfunction Parser(options) {\n  this.options = options || {};\n  this.unaryOps = {\n    sin: Math.sin,\n    cos: Math.cos,\n    tan: Math.tan,\n    asin: Math.asin,\n    acos: Math.acos,\n    atan: Math.atan,\n    sinh: Math.sinh || sinh,\n    cosh: Math.cosh || cosh,\n    tanh: Math.tanh || tanh,\n    asinh: Math.asinh || asinh,\n    acosh: Math.acosh || acosh,\n    atanh: Math.atanh || atanh,\n    sqrt: Math.sqrt,\n    cbrt: Math.cbrt || cbrt,\n    log: Math.log,\n    log2: Math.log2 || log2,\n    ln: Math.log,\n    lg: Math.log10 || log10,\n    log10: Math.log10 || log10,\n    expm1: Math.expm1 || expm1,\n    log1p: Math.log1p || log1p,\n    abs: Math.abs,\n    ceil: Math.ceil,\n    floor: Math.floor,\n    round: Math.round,\n    trunc: Math.trunc || trunc,\n    '-': neg,\n    '+': Number,\n    exp: Math.exp,\n    not: not,\n    length: stringOrArrayLength,\n    '!': factorial,\n    sign: Math.sign || sign\n  };\n\n  this.binaryOps = {\n    '+': add,\n    '-': sub,\n    '*': mul,\n    '/': div,\n    '%': mod,\n    '^': Math.pow,\n    '||': concat,\n    '==': equal,\n    '!=': notEqual,\n    '>': greaterThan,\n    '<': lessThan,\n    '>=': greaterThanEqual,\n    '<=': lessThanEqual,\n    and: andOperator,\n    or: orOperator,\n    'in': inOperator,\n    '=': setVar,\n    '[': arrayIndex\n  };\n\n  this.ternaryOps = {\n    '?': condition\n  };\n\n  this.functions = {\n    random: random,\n    fac: factorial,\n    min: min,\n    max: max,\n    hypot: Math.hypot || hypot,\n    pyt: Math.hypot || hypot, // backward compat\n    pow: Math.pow,\n    atan2: Math.atan2,\n    'if': condition,\n    gamma: gamma,\n    roundTo: roundTo,\n    map: arrayMap,\n    fold: arrayFold,\n    filter: arrayFilter,\n    indexOf: stringOrArrayIndexOf,\n    join: arrayJoin\n  };\n\n  this.consts = {\n    E: Math.E,\n    PI: Math.PI,\n    'true': true,\n    'false': false\n  };\n}\n\nParser.prototype.parse = function (expr) {\n  var instr = [];\n  var parserState = new ParserState(\n    this,\n    new TokenStream(this, expr),\n    { allowMemberAccess: this.options.allowMemberAccess }\n  );\n\n  parserState.parseExpression(instr);\n  parserState.expect(TEOF, 'EOF');\n\n  return new Expression(instr, this);\n};\n\nParser.prototype.evaluate = function (expr, variables) {\n  return this.parse(expr).evaluate(variables);\n};\n\nvar sharedParser = new Parser();\n\nParser.parse = function (expr) {\n  return sharedParser.parse(expr);\n};\n\nParser.evaluate = function (expr, variables) {\n  return sharedParser.parse(expr).evaluate(variables);\n};\n\nvar optionNameMap = {\n  '+': 'add',\n  '-': 'subtract',\n  '*': 'multiply',\n  '/': 'divide',\n  '%': 'remainder',\n  '^': 'power',\n  '!': 'factorial',\n  '<': 'comparison',\n  '>': 'comparison',\n  '<=': 'comparison',\n  '>=': 'comparison',\n  '==': 'comparison',\n  '!=': 'comparison',\n  '||': 'concatenate',\n  'and': 'logical',\n  'or': 'logical',\n  'not': 'logical',\n  '?': 'conditional',\n  ':': 'conditional',\n  '=': 'assignment',\n  '[': 'array',\n  '()=': 'fndef'\n};\n\nfunction getOptionName(op) {\n  return optionNameMap.hasOwnProperty(op) ? optionNameMap[op] : op;\n}\n\nParser.prototype.isOperatorEnabled = function (op) {\n  var optionName = getOptionName(op);\n  var operators = this.options.operators || {};\n\n  return !(optionName in operators) || !!operators[optionName];\n};\n\n/*!\n Based on ndef.parser, by Raphael Graf(r@undefined.ch)\n http://www.undefined.ch/mparser/index.html\n\n Ported to JavaScript and modified by Matthew Crumley (email@matthewcrumley.com, http://silentmatt.com/)\n\n You are free to use and modify this code in anyway you find useful. Please leave this comment in the code\n to acknowledge its original source. If you feel like it, I enjoy hearing about projects that use my code,\n but don't feel like you have to let me know or ask permission.\n*/\n\n// Backwards compatibility\nvar index = {\n  Parser: Parser,\n  Expression: Expression\n};\n\nexport default index;\nexport { Expression, Parser };\n"],"names":["$53dcce4e9343ab5c$var$convertColorsAndTextures","root","_apply","material","color","convertSRGBToLinear","map","encoding","$ilwiq","sRGBEncoding","traverse","c","Array","isArray","forEach","$53dcce4e9343ab5c$export$17659427f433e9a5","Promise","resolve","reject","xacroLoader","$crxIg","XacroLoader","rospackCommands","find","pkg","load","xacro","ik","urdf","goalMap","manager","LoadingManager","onLoad","toRemove","isLight","isLineSegments","push","l","parent","remove","helperScale","urdfLoader","$8C12l","default","packages","curiosity_mars_rover_description","parse","joints","arm_03_joint","limit","upper","Math","PI","$4CEV9","urdfRobotToIKRoot","clearDoF","$6yEsn","quat","fromEuler","quaternion","position","setMatrixNeedsUpdate","setJointValue","setIKFromUrdf","Map","tool","name","link","links","arm_tools","ee","Joint","makeClosure","getWorldPosition","getWorldQuaternion","set","$53dcce4e9343ab5c$export$6fcd1d7de9eef84d","staubli_tx2_90_support","tool0","$53dcce4e9343ab5c$export$4078f69740e7bc66","result","DEG2RAD","rotation","i","console","log","isJoint","dofRestPose","dofValues","restPoseSet","test","$53dcce4e9343ab5c$export$356755f6346ac8bd","loader","r2_description","$8FOWU","$90f2285487609b00$export$20d4cdea3605edba","$46e2R","XacroParser","super","this","fetchOptions","url","onComplete","onError","workingPath","$dWajn","getUrlBase","getFileContents","then","text","catch","e","data","path","fetch","res","ok","Error","status","statusText","$a258b0ce13bc87d4$export$808f821920713542","tokens","split","pop","length","join","$a258b0ce13bc87d4$export$d4e3728d787f4318","node","tagName","children","$a258b0ce13bc87d4$export$b7d58db314e0ac27","stripPropsMacros","cloned","cloneNode","childNodes","child","appendChild","$a258b0ce13bc87d4$export$9ac9d97bb14e572","arr","el","nodeType","ELEMENT_NODE","$a258b0ce13bc87d4$export$4e40859592ee7ac2","str","$a258b0ce13bc87d4$export$844ec244b1367d54","$a258b0ce13bc87d4$export$7e4aa119212bc614","isNaN","parseFloat","$a258b0ce13bc87d4$export$660b2ee2d4fb4eff","replace","m","trim","$a258b0ce13bc87d4$export$ea098e0ad93a8b80","val","positive","$a258b0ce13bc87d4$export$f3c94b0efd66345b","Symbol","$a258b0ce13bc87d4$export$2c0d50a82a0126d6","args","obj","key","$a258b0ce13bc87d4$export$4183f2c8c900e548","properties","$2fc29e02cf53df74$export$95de28ea7d6fc1fe","inOrder","requirePrefix","localProperties","evaluateAttribute","str1","properties1","finalValue","stack","allProps","mergePropertySets","globalProperties","unpackParams","match","isRospackCommand","contents","substring","includes","operators","expr","tokenize","t","lastIndex","isOperator","isNumber","isString","arg","toString","cleanExpr","normalizeExpression","handleExpressionEvaluation","stem","shift","handleRospackCommand","message","brace","parseMacro","getAttribute","params","inputMap","inputs","s","param","type","def","parseMacroParam","inp","deepClone","processNode","macros","resultsList","textContent","toLowerCase","removeEndCommentsFromArray","value","hasAttribute","scope","PARENT_SCOPE","macro","nodes","bool","filename","filePath","currWorkingPath","prevWorkingPath","loadInclude","macroName","ogProperties","ogMacros","createNewPropertyScope","c2","filter","blockCount","p","macroChildren","c1","evaluateMacro","attributes","attr","setAttribute","resultChildren","i1","l1","gatherPropertiesAndMacros","propertyEl","getElementsWithName","el1","macroEl","el2","scope1","DOMParser","parseFromString","loadIncludes","results","includeEl","promises","namespace","content","all","workingPath1","globalMacros","includeMap","True","False","Function","$5NdfP","evaluateExpression","content1","warn","inOrderPromise","inc","removeAttribute","processXacro","$437bcf6535dc9392$var$parser","Parser","$437bcf6535dc9392$export$3191fa0ae67b450c","evaluate","unaryOps","functions","sin","cos","tan","asin","acos","atan","atan2","pow","radians","degrees","binaryOps","a","b","Number","in","consts","pi","E","$59b260dcf264c202$var$INUMBER","$59b260dcf264c202$var$IOP1","$59b260dcf264c202$var$IOP2","$59b260dcf264c202$var$IOP3","$59b260dcf264c202$var$IVAR","$59b260dcf264c202$var$IVARNAME","$59b260dcf264c202$var$IFUNCALL","$59b260dcf264c202$var$IFUNDEF","$59b260dcf264c202$var$IEXPR","$59b260dcf264c202$var$IEXPREVAL","$59b260dcf264c202$var$IMEMBER","$59b260dcf264c202$var$IENDSTATEMENT","$59b260dcf264c202$var$IARRAY","$59b260dcf264c202$var$Instruction","$59b260dcf264c202$var$unaryInstruction","$59b260dcf264c202$var$binaryInstruction","$59b260dcf264c202$var$ternaryInstruction","$59b260dcf264c202$var$simplify","ternaryOps","values","n1","n2","n3","f","nstack","newexpression","item","apply","x","concat","hasOwnProperty","$59b260dcf264c202$var$substitute","variable","j","replitem","expritem","$59b260dcf264c202$var$evaluate","n11","n21","f1","args1","argCount1","$59b260dcf264c202$var$isExpressionEvaluator","$59b260dcf264c202$var$resolveExpression","numTokens","parser","isOperatorEnabled","v","undefined","unshift","call","argCount","Object","assign","len","arguments","defineProperty","writable","$59b260dcf264c202$var$createExpressionEvaluator","token","n","$59b260dcf264c202$var$expressionToString","toJS","$59b260dcf264c202$var$escapeValue","String","JSON","stringify","$59b260dcf264c202$var$contains","array","$59b260dcf264c202$var$getSymbols","symbols","options","withMembers","prevVar","$59b260dcf264c202$export$bfe37c1342e5eb83","prototype","simplify","substitute","vars","variables","toJSFunction","$59b260dcf264c202$var$TEOF","$59b260dcf264c202$var$TOP","$59b260dcf264c202$var$TNUMBER","$59b260dcf264c202$var$TSTRING","$59b260dcf264c202$var$TPAREN","$59b260dcf264c202$var$TBRACKET","$59b260dcf264c202$var$TCOMMA","$59b260dcf264c202$var$TNAME","$59b260dcf264c202$var$TSEMICOLON","$59b260dcf264c202$var$Token","index","$59b260dcf264c202$var$TokenStream","expression","pos","current","savedPosition","savedCurrent","newToken","save","restore","next","isWhitespace","isComment","isRadixInteger","isParen","isBracket","isComma","isSemicolon","isNamedOp","isConst","isName","parseError","charAt","r","startPos","quote","indexOf","rawString","unescape","toUpperCase","hasLetter","$59b260dcf264c202$var$codePointPattern","$59b260dcf264c202$var$ParserState","tokenStream","nextToken","savedNextToken","allowMemberAccess","buffer","codePoint","fromCharCode","parseInt","backslash","radix","validDigit","valid","resetPos","foundDot","foundDigits","acceptSign","validExponent","op","getCoordinates","column","line","newline","msg","coords","tokenMatches","accept","expect","parseAtom","instr","parseExpression","parseArrayList","exprInstr","parseUntilEndStatement","parseVariableAssignmentExpression","pushExpression","parseConditionalExpression","varName","varValue","lastInstrIndex","parseOrExpression","trueBranch","falseBranch","parseAndExpression","parseComparison","$59b260dcf264c202$var$COMPARISON_OPERATORS","parseAddSub","$59b260dcf264c202$var$ADD_SUB_OPERATORS","parseTerm","$59b260dcf264c202$var$TERM_OPERATORS","$59b260dcf264c202$var$add","$59b260dcf264c202$var$sub","$59b260dcf264c202$var$mul","$59b260dcf264c202$var$div","$59b260dcf264c202$var$mod","$59b260dcf264c202$var$concat","$59b260dcf264c202$var$equal","$59b260dcf264c202$var$notEqual","$59b260dcf264c202$var$greaterThan","$59b260dcf264c202$var$lessThan","$59b260dcf264c202$var$greaterThanEqual","$59b260dcf264c202$var$lessThanEqual","$59b260dcf264c202$var$andOperator","Boolean","$59b260dcf264c202$var$orOperator","$59b260dcf264c202$var$inOperator","$59b260dcf264c202$var$sinh","exp","$59b260dcf264c202$var$cosh","$59b260dcf264c202$var$tanh","Infinity","$59b260dcf264c202$var$asinh","sqrt","$59b260dcf264c202$var$acosh","$59b260dcf264c202$var$atanh","$59b260dcf264c202$var$log10","LOG10E","$59b260dcf264c202$var$neg","$59b260dcf264c202$var$not","$59b260dcf264c202$var$trunc","ceil","floor","$59b260dcf264c202$var$random","random","$59b260dcf264c202$var$factorial","$59b260dcf264c202$var$gamma","parseFactor","parseExponential","parsePostfixExpression","parseFunctionCall","parseMemberExpression","parseArgumentList","$59b260dcf264c202$var$GAMMA_P","isFinite","round","$59b260dcf264c202$var$isInteger","NaN","twoN","threeN","fourN","fiveN","$59b260dcf264c202$var$stringOrArrayLength","$59b260dcf264c202$var$hypot","sum","larg","div","abs","$59b260dcf264c202$var$condition","cond","yep","nope","$59b260dcf264c202$var$roundTo","$59b260dcf264c202$var$setVar","$59b260dcf264c202$var$arrayIndex","$59b260dcf264c202$var$max","max","$59b260dcf264c202$var$min","min","$59b260dcf264c202$var$arrayMap","$59b260dcf264c202$var$arrayFold","init","reduce","acc","$59b260dcf264c202$var$arrayFilter","$59b260dcf264c202$var$stringOrArrayIndexOf","target","$59b260dcf264c202$var$arrayJoin","sep","$59b260dcf264c202$var$sign","$59b260dcf264c202$var$ONE_THIRD","$59b260dcf264c202$var$cbrt","$59b260dcf264c202$var$expm1","$59b260dcf264c202$var$log1p","$59b260dcf264c202$var$log2","LN2","$59b260dcf264c202$export$7acfa6ed01010e37","sinh","cosh","tanh","asinh","acosh","atanh","cbrt","log2","ln","lg","log10","expm1","log1p","trunc","not","sign","and","or","fac","hypot","pyt","if","gamma","roundTo","fold","true","false","parserState","$59b260dcf264c202$var$sharedParser","$59b260dcf264c202$var$optionNameMap","optionName","$59b260dcf264c202$var$getOptionName"],"version":3,"file":"index.3b69dfe7.js.map"}